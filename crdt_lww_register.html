<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LWW-Register CRDT | AlgoViz Hub</title>
        <meta
            content="Interactive visualization of LWW-Register CRDT for distributed systems"
            name="description"
        />
        <meta
            content="crdt, lww-register, last-writer-wins, distributed systems, conflict resolution, eventual consistency, visualization, interactive"
            name="keywords"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&amp;family=Roboto:wght@300;400;500;700&amp;display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary: #0f172a;
                --secondary: #1e293b;
                --accent: #6366f1;
                --accent-light: #818cf8;
                --accent-glow: rgba(99, 102, 241, 0.2);
                --text: #e2e8f0;
                --text-secondary: #94a3b8;
                --card-bg: rgba(30, 41, 59, 0.7);
                --success: #10b981;
                --warning: #f59e0b;
                --danger: #ef4444;
                --transition: all 0.3s ease;
                --radius: 12px;
                --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                --glow: 0 0 15px var(--accent-glow);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background: linear-gradient(
                    135deg,
                    var(--primary),
                    var(--secondary)
                );
                color: var(--text);
                font-family: "Roboto", sans-serif;
                line-height: 1.6;
                min-height: 100vh;
                padding: 0;
                position: relative;
                overflow-x: hidden;
            }

            body::before {
                content: "";
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background:
                    radial-gradient(
                        circle at 10% 20%,
                        rgba(99, 102, 241, 0.1) 0%,
                        transparent 20%
                    ),
                    radial-gradient(
                        circle at 90% 80%,
                        rgba(129, 140, 248, 0.1) 0%,
                        transparent 20%
                    );
                z-index: -1;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Header Styles */
            header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 20px 0;
                position: relative;
                border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            }

            .logo {
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .logo-icon {
                width: 50px;
                height: 50px;
                background: var(--accent);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: var(--glow);
            }

            .logo-icon i {
                font-size: 24px;
                color: white;
            }

            .logo-text h1 {
                font-family: "Roboto Mono", monospace;
                font-weight: 700;
                font-size: 28px;
                background: linear-gradient(
                    to right,
                    var(--accent-light),
                    var(--accent)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            .logo-text p {
                font-size: 14px;
                color: var(--text-secondary);
                letter-spacing: 1.5px;
            }

            .breadcrumb {
                font-size: 14px;
                color: var(--text-secondary);
                margin-top: 10px;
            }

            .breadcrumb a {
                color: var(--accent-light);
                text-decoration: none;
                transition: var(--transition);
            }

            .breadcrumb a:hover {
                text-decoration: underline;
            }

            /* Algorithm Header */
            .algorithm-header {
                margin: 40px 0;
                text-align: center;
                padding: 20px;
                background: var(--card-bg);
                border-radius: var(--radius);
                border: 1px solid rgba(148, 163, 184, 0.1);
                backdrop-filter: blur(10px);
                position: relative;
                overflow: hidden;
            }

            .algorithm-header::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 4px;
                background: linear-gradient(
                    to right,
                    var(--accent),
                    var(--accent-light)
                );
            }

            .algorithm-header h1 {
                font-size: 42px;
                margin-bottom: 15px;
                background: linear-gradient(
                    to right,
                    var(--accent-light),
                    var(--accent)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                font-weight: 800;
            }

            .algorithm-header .category {
                font-size: 18px;
                color: var(--accent-light);
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                flex-wrap: wrap;
            }

            .complexity-badge {
                display: inline-block;
                background: rgba(129, 140, 248, 0.2);
                color: var(--accent-light);
                padding: 6px 15px;
                border-radius: 20px;
                font-size: 16px;
                font-weight: 600;
                font-family: "Roboto Mono", monospace;
                margin-top: 15px;
            }

            /* Main Content Layout */
            .main-content {
                display: grid;
                grid-template-columns: 1fr 350px;
                gap: 30px;
                margin-bottom: 40px;
            }

            @media (max-width: 900px) {
                .main-content {
                    grid-template-columns: 1fr;
                }
            }

            /* Algorithm Detail Sections */
            .section {
                background: var(--card-bg);
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                padding: 30px;
                margin-bottom: 30px;
                border: 1px solid rgba(148, 163, 184, 0.1);
                backdrop-filter: blur(10px);
                position: relative;
                overflow: hidden;
            }

            .section::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 4px;
                background: linear-gradient(
                    to right,
                    var(--accent),
                    var(--accent-light)
                );
            }

            .section h2 {
                font-size: 26px;
                margin-bottom: 20px;
                color: var(--accent-light);
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .section h2 i {
                color: var(--accent);
                width: 36px;
                height: 36px;
                background: rgba(99, 102, 241, 0.2);
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .section p {
                color: var(--text-secondary);
                font-size: 17px;
                line-height: 1.8;
                margin-bottom: 20px;
            }

            .key-points {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 20px;
                margin: 25px 0;
            }

            .point-card {
                background: rgba(15, 23, 42, 0.5);
                border-radius: var(--radius);
                padding: 20px;
                border: 1px solid rgba(148, 163, 184, 0.1);
            }

            .point-card h3 {
                color: var(--accent-light);
                margin-bottom: 12px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .point-card h3 i {
                color: var(--accent);
            }

            .point-card p {
                margin-bottom: 0;
                font-size: 15px;
            }

            /* Visualization Console */
            .visualization-console {
                background: rgba(15, 23, 42, 0.8);
                border-radius: var(--radius);
                padding: 25px;
                margin: 30px 0;
                border: 1px solid rgba(99, 102, 241, 0.3);
                box-shadow: var(--glow);
            }

            .console-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .console-header h3 {
                color: var(--accent-light);
                font-size: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .console-controls {
                display: flex;
                gap: 10px;
            }

            .console-btn {
                background: var(--accent);
                color: white;
                border: none;
                padding: 8px 15px;
                border-radius: 5px;
                cursor: pointer;
                font-family: "Roboto Mono", monospace;
                transition: var(--transition);
            }

            .console-btn:hover {
                background: var(--accent-light);
            }

            .console-btn.secondary {
                background: rgba(148, 163, 184, 0.2);
            }

            .visualization-area {
                min-height: 300px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 8px;
                display: flex;
                flex-direction: column;
                padding: 20px;
                position: relative;
                overflow: hidden;
                gap: 15px;
            }

            .visualization-area::before {
                content: "LWW-Register Visualization";
                position: absolute;
                color: rgba(148, 163, 184, 0.5);
                font-size: 20px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 0;
            }

            .console-input {
                display: flex;
                gap: 10px;
                margin-top: 20px;
            }

            .console-input input {
                flex: 1;
                padding: 12px 15px;
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.2);
                border-radius: 5px;
                color: var(--text);
                font-family: "Roboto Mono", monospace;
            }

            .console-input input:focus {
                outline: none;
                border-color: var(--accent);
            }

            /* Algorithm Properties */
            .properties-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .property-card {
                background: rgba(15, 23, 42, 0.5);
                border-radius: var(--radius);
                padding: 20px;
                border: 1px solid rgba(148, 163, 184, 0.1);
                text-align: center;
            }

            .property-card h4 {
                color: var(--text-secondary);
                font-size: 14px;
                margin-bottom: 8px;
                font-weight: 400;
            }

            .property-card .value {
                font-size: 20px;
                font-weight: 700;
                color: var(--accent-light);
                font-family: "Roboto Mono", monospace;
            }

            /* Footer */
            footer {
                text-align: center;
                padding: 40px 0 30px;
                color: var(--text-secondary);
                font-size: 14px;
                border-top: 1px solid rgba(148, 163, 184, 0.1);
                margin-top: 40px;
            }

            footer p {
                margin: 10px 0;
            }

            .footer-links {
                display: flex;
                justify-content: center;
                gap: 25px;
                margin-top: 15px;
                flex-wrap: wrap;
                margin-bottom: 20px;
            }

            .footer-links a {
                color: var(--accent-light);
                text-decoration: none;
                transition: var(--transition);
            }

            .footer-links a:hover {
                color: var(--accent);
            }

            /* Animations */
            @keyframes float {
                0% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-10px);
                }
                100% {
                    transform: translateY(0px);
                }
            }

            .floating {
                animation: float 6s ease-in-out infinite;
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                header {
                    flex-direction: column;
                    gap: 25px;
                    text-align: center;
                }

                .algorithm-header h1 {
                    font-size: 32px;
                }

                .key-points {
                    grid-template-columns: 1fr;
                }
            }

            /* Code Block Styling */
            .code-block {
                background: #0d1117;
                border-radius: 8px;
                padding: 20px;
                margin: 25px 0;
                overflow-x: auto;
                font-family: "Roboto Mono", monospace;
                font-size: 15px;
                border: 1px solid rgba(99, 102, 241, 0.3);
            }

            .code-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                color: var(--text-secondary);
            }

            .copy-btn {
                background: rgba(99, 102, 241, 0.2);
                color: var(--accent-light);
                border: none;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                font-family: "Roboto Mono", monospace;
                transition: var(--transition);
            }

            .copy-btn:hover {
                background: rgba(99, 102, 241, 0.3);
            }

            .code-block pre {
                margin: 0;
                overflow-x: auto;
            }

            .code-block code {
                color: #c9d1d9;
                line-height: 1.5;
            }

            .keyword {
                color: #ff7b72;
            }
            .function {
                color: #d2a8ff;
            }
            .comment {
                color: #8b949e;
            }
            .string {
                color: #a5d6ff;
            }
            .number {
                color: #79c0ff;
            }

            /* LWW-Register specific styles */
            .replica {
                background: rgba(30, 41, 59, 0.7);
                border-radius: 8px;
                padding: 15px;
                border: 1px solid rgba(99, 102, 241, 0.3);
            }

            .replica-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            }

            .replica-title {
                font-weight: bold;
                color: var(--accent-light);
            }

            .replica-status {
                font-size: 14px;
                color: var(--text-secondary);
            }

            .register-display {
                display: flex;
                flex-direction: column;
                gap: 10px;
                margin-bottom: 15px;
            }

            .register-value {
                font-size: 24px;
                font-weight: bold;
                text-align: center;
                padding: 15px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 8px;
                font-family: "Roboto Mono", monospace;
                min-height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .register-timestamp {
                text-align: center;
                font-size: 14px;
                color: var(--text-secondary);
                font-family: "Roboto Mono", monospace;
            }

            .controls {
                display: flex;
                gap: 10px;
                margin-top: 15px;
            }

            .control-btn {
                padding: 8px 12px;
                background: var(--accent);
                border: none;
                border-radius: 5px;
                color: white;
                cursor: pointer;
                font-family: "Roboto Mono", monospace;
                transition: var(--transition);
                flex: 1;
            }

            .control-btn:hover {
                background: var(--accent-light);
            }

            .control-input {
                padding: 8px 12px;
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.2);
                border-radius: 5px;
                color: var(--text);
                font-family: "Roboto Mono", monospace;
                flex: 2;
            }

            .operation-log {
                margin-top: 15px;
                padding: 10px;
                background: rgba(0, 0, 0, 0.2);
                border-radius: 6px;
                font-size: 12px;
                max-height: 100px;
                overflow-y: auto;
            }

            .log-entry {
                margin-bottom: 5px;
                padding: 3px 5px;
                border-radius: 3px;
                background: rgba(99, 102, 241, 0.1);
            }

            .stats-panel {
                display: flex;
                justify-content: space-around;
                margin-top: 15px;
                font-family: "Roboto Mono", monospace;
                font-size: 14px;
            }

            .stat-item {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .stat-value {
                font-weight: bold;
                color: var(--accent-light);
                font-size: 18px;
            }

            .stat-label {
                color: var(--text-secondary);
                font-size: 12px;
            }

            .timestamp-visual {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                margin: 10px 0;
            }

            .timestamp-bar {
                height: 20px;
                background: var(--accent);
                border-radius: 4px;
                transition: all 0.5s ease;
            }

            .timestamp-label {
                font-size: 12px;
                color: var(--text-secondary);
                font-family: "Roboto Mono", monospace;
                min-width: 80px;
            }
        </style>
        <meta content="LWW-Register CRDT | AlgoViz Hub" property="og:title" />
        <meta
            content="Interactive visualization of LWW-Register CRDT for distributed systems"
            property="og:description"
        />
        <meta content="article" property="og:type" />
        <meta
            content="https://sgkandale.github.io/lww-register.html"
            property="og:url"
        />
        <meta content="AlgoViz Hub" property="og:site_name" />
        <meta content="summary" name="twitter:card" />
        <meta content="LWW-Register CRDT | AlgoViz Hub" name="twitter:title" />
        <meta
            content="Interactive visualization of LWW-Register CRDT for distributed systems"
            name="twitter:description"
        />
        <meta content="@sgkandale" name="twitter:site" />
        <link
            href="https://sgkandale.github.io/lww-register.html"
            rel="canonical"
        />
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Article",
                "headline": "LWW-Register CRDT | AlgoViz Hub",
                "description": "Interactive visualization of LWW-Register CRDT for distributed systems",
                "author": {
                    "@type": "Person",
                    "name": "Shantanu Kandale"
                },
                "publisher": {
                    "@type": "Organization",
                    "name": "AlgoViz Hub",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://sgkandale.github.io/favicon.ico"
                    }
                },
                "mainEntityOfPage": {
                    "@type": "WebPage",
                    "@id": "https://sgkandale.github.io/lww-register.html"
                }
            }
        </script>
    </head>
    <body>
        <div class="container">
            <!-- Header -->
            <header>
                <div class="logo">
                    <div class="logo-icon floating">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="logo-text">
                        <h1>AlgoViz Hub</h1>
                        <p>ALGORITHM VISUALIZATION REPOSITORY</p>
                        <div class="breadcrumb">
                            <a href="#"><i class="fas fa-home"></i> Home</a>
                            &gt; <a href="#">Distributed Systems</a> &gt;
                            <span>LWW-Register CRDT</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Algorithm Header -->
            <div class="algorithm-header">
                <h1>LWW-Register CRDT</h1>
                <div class="category">
                    <i class="fas fa-network-wired"></i> Last-Writer-Wins
                    Register
                    <span class="complexity-badge">Conflict Resolution</span>
                </div>
                <div class="complexity-badge">Space Complexity: O(1)</div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Left Column: Algorithm Details -->
                <div class="left-column">
                    <!-- Description Section -->
                    <div class="section">
                        <h2><i class="fas fa-file-alt"></i> CRDT Overview</h2>
                        <p>
                            The LWW-Register (Last-Writer-Wins Register) is a
                            Conflict-Free Replicated Data Type (CRDT) that
                            resolves conflicts by always keeping the value from
                            the operation with the latest timestamp. It's one of
                            the simplest and most commonly used CRDTs, providing
                            strong eventual consistency.
                        </p>
                        <p>
                            In distributed systems, when multiple replicas can
                            update the same value independently, the
                            LWW-Register ensures that all replicas eventually
                            converge to the same value by using timestamps to
                            determine which update should take precedence.
                        </p>
                        <div class="key-points">
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-check-circle"></i> Key
                                    Feature
                                </h3>
                                <p>
                                    Simple conflict resolution using timestamps
                                    - last write wins
                                </p>
                            </div>
                            <div class="point-card">
                                <h3><i class="fas fa-bolt"></i> Performance</h3>
                                <p>
                                    Constant time operations (O(1)) for updates
                                    and merges
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-shield-alt"></i> Robustness
                                </h3>
                                <p>
                                    Resilient to network partitions and node
                                    failures
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-project-diagram"></i>
                                    Approach
                                </h3>
                                <p>
                                    Each value is associated with a timestamp,
                                    highest timestamp wins
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Visualization Console -->
                    <div class="section">
                        <h2>
                            <i class="fas fa-laptop-code"></i> Interactive
                            Visualization
                        </h2>
                        <p>
                            Use the interactive console below to visualize how
                            the LWW-Register CRDT works. Simulate multiple
                            replicas updating the same value and observe how the
                            register resolves conflicts based on timestamps.
                        </p>
                        <div class="visualization-console">
                            <div class="console-header">
                                <h3>
                                    <i class="fas fa-play-circle"></i>
                                    LWW-Register Visualization
                                </h3>
                                <div class="console-controls">
                                    <button
                                        class="console-btn secondary"
                                        id="settings-btn"
                                    >
                                        <i class="fas fa-cog"></i> Settings
                                    </button>
                                    <button class="console-btn" id="run-btn">
                                        <i class="fas fa-play"></i> Run
                                    </button>
                                </div>
                            </div>
                            <div
                                class="visualization-area"
                                id="visualization-area"
                            >
                                <div class="replica">
                                    <div class="replica-header">
                                        <div class="replica-title">
                                            Replica A
                                        </div>
                                        <div class="replica-status">Online</div>
                                    </div>
                                    <div class="register-display">
                                        <div
                                            class="register-value"
                                            id="value-a"
                                        >
                                            Hello
                                        </div>
                                        <div
                                            class="register-timestamp"
                                            id="timestamp-a"
                                        >
                                            Timestamp: 1000
                                        </div>
                                        <div class="timestamp-visual">
                                            <span class="timestamp-label"
                                                >Time: 1000</span
                                            >
                                            <div
                                                class="timestamp-bar"
                                                style="
                                                    width: 40%;
                                                    background: var(--accent);
                                                "
                                            ></div>
                                        </div>
                                    </div>
                                    <div class="controls">
                                        <input
                                            type="text"
                                            class="control-input"
                                            id="input-a"
                                            placeholder="New value"
                                            value="Hello"
                                        />
                                        <button
                                            class="control-btn"
                                            onclick="updateReplica('A')"
                                        >
                                            Update
                                        </button>
                                    </div>
                                    <div class="operation-log" id="log-a">
                                        <div class="log-entry">
                                            Initialized with "Hello" at
                                            timestamp 1000
                                        </div>
                                    </div>
                                </div>

                                <div class="replica">
                                    <div class="replica-header">
                                        <div class="replica-title">
                                            Replica B
                                        </div>
                                        <div class="replica-status">Online</div>
                                    </div>
                                    <div class="register-display">
                                        <div
                                            class="register-value"
                                            id="value-b"
                                        >
                                            Hello
                                        </div>
                                        <div
                                            class="register-timestamp"
                                            id="timestamp-b"
                                        >
                                            Timestamp: 1000
                                        </div>
                                        <div class="timestamp-visual">
                                            <span class="timestamp-label"
                                                >Time: 1000</span
                                            >
                                            <div
                                                class="timestamp-bar"
                                                style="
                                                    width: 40%;
                                                    background: var(--accent);
                                                "
                                            ></div>
                                        </div>
                                    </div>
                                    <div class="controls">
                                        <input
                                            type="text"
                                            class="control-input"
                                            id="input-b"
                                            placeholder="New value"
                                            value="World"
                                        />
                                        <button
                                            class="control-btn"
                                            onclick="updateReplica('B')"
                                        >
                                            Update
                                        </button>
                                    </div>
                                    <div class="operation-log" id="log-b">
                                        <div class="log-entry">
                                            Initialized with "Hello" at
                                            timestamp 1000
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="console-input">
                                <button
                                    class="console-btn"
                                    id="sync-btn"
                                    onclick="syncReplicas()"
                                >
                                    <i class="fas fa-sync"></i> Sync Replicas
                                </button>
                                <button
                                    class="console-btn secondary"
                                    id="reset-btn"
                                    onclick="resetReplicas()"
                                >
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                            <div class="stats-panel">
                                <div class="stat-item">
                                    <span class="stat-value" id="ops-count"
                                        >0</span
                                    >
                                    <span class="stat-label">Operations</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="sync-count"
                                        >0</span
                                    >
                                    <span class="stat-label">Sync Events</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="conflict-count"
                                        >0</span
                                    >
                                    <span class="stat-label"
                                        >Conflicts Resolved</span
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Algorithm Steps -->
                    <div class="section">
                        <h2>
                            <i class="fas fa-list-ol"></i> LWW-Register
                            Operations
                        </h2>
                        <p>
                            The LWW-Register CRDT uses simple but powerful
                            operations to ensure eventual consistency:
                        </p>
                        <div class="key-points">
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-pen"></i> 1. Update
                                    Operation
                                </h3>
                                <p>
                                    When updating the register, a replica sets
                                    the value and associates it with a
                                    timestamp. The timestamp is typically the
                                    current logical or physical time, ensuring
                                    it's unique and monotonically increasing.
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-clock"></i> 2. Timestamp
                                    Generation
                                </h3>
                                <p>
                                    Each update generates a new timestamp that
                                    is greater than any previous timestamp seen
                                    by that replica. Hybrid logical clocks or
                                    vector clocks can be used in distributed
                                    systems.
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-exchange-alt"></i> 3. Merge
                                    Operation
                                </h3>
                                <p>
                                    When two replicas synchronize, they compare
                                    their values and timestamps. The value with
                                    the highest timestamp is kept, and the other
                                    is discarded. This is the "last-writer-wins"
                                    policy.
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-sync-alt"></i> 4.
                                    Synchronization
                                </h3>
                                <p>
                                    Replicas periodically exchange their state
                                    (value and timestamp). The merge operation
                                    is applied to resolve any differences,
                                    ensuring all replicas converge to the same
                                    value.
                                </p>
                            </div>
                            <div class="point-card">
                                <h3>
                                    <i class="fas fa-check-double"></i> 5.
                                    Convergence
                                </h3>
                                <p>
                                    After synchronization, all replicas will
                                    have the same value and timestamp. The
                                    system has reached a consistent state until
                                    new updates occur.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Pseudocode Section -->
                    <div class="section">
                        <h2><i class="fas fa-list-ol"></i> Pseudocode</h2>
                        <div class="code-block">
                            <pre><code>// LWW-Register data structure
struct LWWRegister {
    value: any
    timestamp: number
}

// Initialize a new register
function initialize(value, initial_timestamp):
    return LWWRegister(value, initial_timestamp)

// Update the register with a new value
function update(register, new_value, new_timestamp):
    if new_timestamp > register.timestamp:
        register.value = new_value
        register.timestamp = new_timestamp

// Merge two registers (resolve conflicts)
function merge(register_a, register_b):
    if register_a.timestamp > register_b.timestamp:
        return register_a
    else:
        return register_b

// Example usage
replica1 = initialize("Hello", 1000)
replica2 = initialize("Hello", 1000)

// Concurrent updates
update(replica1, "World", 1500)  // This update will win if timestamp is higher
update(replica2, "CRDT", 1200)   // This update has lower timestamp

// Synchronization
merged = merge(replica1, replica2)
// merged.value = "World", merged.timestamp = 1500</code></pre>
                        </div>
                    </div>

                    <!-- Implementation Section -->
                    <div class="section">
                        <h2><i class="fas fa-code"></i> Implementation</h2>
                        <p>
                            Below is a JavaScript implementation of the
                            LWW-Register CRDT. This implementation includes the
                            basic operations and demonstrates how conflicts are
                            resolved using timestamps.
                        </p>
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript Implementation</span>
                                <button class="copy-btn">
                                    <i class="fas fa-copy"></i> Copy Code
                                </button>
                            </div>
                            <pre><code><span class="keyword">class</span> <span class="function">LWWRegister</span> {
    <span class="function">constructor</span>(initialValue, initialTimestamp = <span class="number">0</span>) {
        <span class="keyword">this</span>.value = initialValue;
        <span class="keyword">this</span>.timestamp = initialTimestamp;
    }

    <span class="comment">// Update the value with a new timestamp</span>
    <span class="function">update</span>(newValue, newTimestamp) {
        <span class="keyword">if</span> (newTimestamp > <span class="keyword">this</span>.timestamp) {
            <span class="keyword">this</span>.value = newValue;
            <span class="keyword">this</span>.timestamp = newTimestamp;
            <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// Update applied</span>
        }
        <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// Update ignored (older timestamp)</span>
    }

    <span class="comment">// Merge with another register</span>
    <span class="function">merge</span>(otherRegister) {
        <span class="keyword">if</span> (otherRegister.timestamp > <span class="keyword">this</span>.timestamp) {
            <span class="keyword">this</span>.value = otherRegister.value;
            <span class="keyword">this</span>.timestamp = otherRegister.timestamp;
            <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// Merge applied</span>
        }
        <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// Our value is newer</span>
    }

    <span class="comment">// Get the current value</span>
    <span class="function">getValue</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.value;
    }

    <span class="comment">// Get the current timestamp</span>
    <span class="function">getTimestamp</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.timestamp;
    }

    <span class="comment">// Check if this register is equal to another</span>
    <span class="function">equals</span>(otherRegister) {
        <span class="keyword">return</span> <span class="keyword">this</span>.value === otherRegister.value &amp;&amp;
               <span class="keyword">this</span>.timestamp === otherRegister.timestamp;
    }
}

<span class="comment">// Example usage</span>
<span class="keyword">const</span> replica1 = <span class="keyword">new</span> LWWRegister(<span class="string">'Hello'</span>, <span class="number">1000</span>);
<span class="keyword">const</span> replica2 = <span class="keyword">new</span> LWWRegister(<span class="string">'Hello'</span>, <span class="number">1000</span>);

<span class="comment">// Simulate concurrent updates</span>
replica1.update(<span class="string">'World'</span>, <span class="number">1500</span>);  <span class="comment">// This update has a higher timestamp</span>
replica2.update(<span class="string">'CRDT'</span>, <span class="number">1200</span>);   <span class="comment">// This update has a lower timestamp</span>

<span class="comment">// Synchronize replicas</span>
replica1.merge(replica2);  <span class="comment">// replica1 keeps its value (timestamp 1500 > 1200)</span>
replica2.merge(replica1);  <span class="comment">// replica2 adopts replica1's value</span>

console.log(<span class="string">'Replica 1 value:'</span>, replica1.getValue());  <span class="comment">// 'World'</span>
console.log(<span class="string">'Replica 2 value:'</span>, replica2.getValue());  <span class="comment">// 'World'</span>

<span class="comment">// Both replicas now have the same value and timestamp</span>
console.log(<span class="string">'Replicas synchronized:'</span>, replica1.equals(replica2));  <span class="comment">// true</span></code></pre>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Additional Info -->
                <div class="right-column">
                    <!-- Properties Section -->
                    <div class="section">
                        <h2>
                            <i class="fas fa-info-circle"></i> CRDT Properties
                        </h2>
                        <div class="properties-grid">
                            <div class="property-card">
                                <h4>Category</h4>
                                <div class="value">State-based</div>
                            </div>
                            <div class="property-card">
                                <h4>Consistency</h4>
                                <div class="value">Eventual</div>
                            </div>
                            <div class="property-card">
                                <h4>Convergence</h4>
                                <div class="value">Strong</div>
                            </div>
                            <div class="property-card">
                                <h4>Fault Tolerance</h4>
                                <div class="value">High</div>
                            </div>
                            <div class="property-card">
                                <h4>Space Complexity</h4>
                                <div class="value">O(1)</div>
                            </div>
                            <div class="property-card">
                                <h4>Time Complexity</h4>
                                <div class="value">O(1)</div>
                            </div>
                            <div class="property-card">
                                <h4>Network Overhead</h4>
                                <div class="value">Low</div>
                            </div>
                            <div class="property-card">
                                <h4>Approach</h4>
                                <div class="value">Timestamp-based</div>
                            </div>
                        </div>
                    </div>

                    <!-- Applications Section -->
                    <div class="section">
                        <h2><i class="fas fa-lightbulb"></i> Applications</h2>
                        <p>
                            LWW-Register CRDTs are used in various distributed
                            systems where simple conflict resolution is
                            sufficient:
                        </p>
                        <ul
                            style="
                                padding-left: 20px;
                                margin: 15px 0;
                                color: var(--text-secondary);
                            "
                        >
                            <li style="margin-bottom: 10px">
                                Distributed configuration management
                            </li>
                            <li style="margin-bottom: 10px">
                                User profile and preference storage
                            </li>
                            <li style="margin-bottom: 10px">
                                Leader election systems
                            </li>
                            <li style="margin-bottom: 10px">
                                Simple counter and flag synchronization
                            </li>
                            <li>Resource ownership tracking</li>
                        </ul>
                    </div>

                    <!-- Advantages Section -->
                    <div class="section">
                        <h2><i class="fas fa-plus-circle"></i> Advantages</h2>
                        <ul
                            style="
                                padding-left: 20px;
                                margin: 15px 0;
                                color: var(--text-secondary);
                            "
                        >
                            <li style="margin-bottom: 10px">
                                Extremely simple to implement and understand
                            </li>
                            <li style="margin-bottom: 10px">
                                Guaranteed convergence with minimal overhead
                            </li>
                            <li style="margin-bottom: 10px">
                                Low memory footprint (only value + timestamp)
                            </li>
                            <li style="margin-bottom: 10px">
                                No coordination needed between replicas
                            </li>
                            <li>Works well for many practical use cases</li>
                        </ul>
                    </div>

                    <!-- Limitations Section -->
                    <div class="section">
                        <h2>
                            <i class="fas fa-exclamation-triangle"></i>
                            Limitations
                        </h2>
                        <ul
                            style="
                                padding-left: 20px;
                                margin: 15px 0;
                                color: var(--text-secondary);
                            "
                        >
                            <li style="margin-bottom: 10px">
                                Data loss can occur if later writes are not
                                meaningful
                            </li>
                            <li style="margin-bottom: 10px">
                                Requires synchronized clocks or logical
                                timestamps
                            </li>
                            <li style="margin-bottom: 10px">
                                Not suitable for applications where all writes
                                must be preserved
                            </li>
                            <li>
                                May not match user expectations in collaborative
                                editing
                            </li>
                        </ul>
                    </div>

                    <!-- Comparison Section -->
                    <div class="section">
                        <h2>
                            <i class="fas fa-not-equal"></i> LWW vs. Other CRDTs
                        </h2>
                        <ul
                            style="
                                padding-left: 20px;
                                margin: 15px 0;
                                color: var(--text-secondary);
                            "
                        >
                            <li style="margin-bottom: 10px">
                                <strong>LWW-Register</strong>: Simple, discards
                                older writes
                            </li>
                            <li style="margin-bottom: 10px">
                                <strong>Multi-Value Register</strong>: Preserves
                                all concurrent writes for conflict resolution
                            </li>
                            <li style="margin-bottom: 10px">
                                <strong>CRDT Counters</strong>: Merge operations
                                by summing increments
                            </li>
                            <li style="margin-bottom: 10px">
                                <strong>CRDT Sets</strong>: Support add/remove
                                operations with various semantics
                            </li>
                            <li>
                                <strong>CRDT Sequences</strong>: Preserve
                                ordering of elements in a list
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer>
                <div class="footer-links">
                    <a
                        href="https://www.linkedin.com/in/sgkandale/"
                        target="_blank"
                        ><i class="fa-brands fa-linkedin"></i> LinkedIN</a
                    >
                    <a href="mailto:me@sgkandale.com"
                        ><i class="fa-solid fa-at"></i> E-Mail</a
                    >
                    <a href="https://buymeacoffee.com/sgkandale" target="_blank"
                        ><i class="fa-solid fa-mug-hot"></i> Buy Me a Coffee</a
                    >
                </div>
                <p>
                    AlgoViz Hub - Interactive Algorithm Visualization Platform
                </p>
                <p> 2025 AlgoViz Hub. All rights reserved.</p>
            </footer>
        </div>

        <script>
            // Copy button functionality
            document.querySelectorAll(".copy-btn").forEach((button) => {
                button.addEventListener("click", function () {
                    const codeBlock =
                        this.closest(".code-block").querySelector("code");
                    const code = codeBlock.innerText;
                    navigator.clipboard.writeText(code);

                    // Show feedback
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copied!';

                    setTimeout(() => {
                        this.innerHTML = originalText;
                    }, 2000);
                });
            });

            // LWW-Register simulation
            let replicas = {
                A: { value: "Hello", timestamp: 1000 },
                B: { value: "Hello", timestamp: 1000 },
            };

            let operations = [];
            let syncEvents = 0;
            let conflictsResolved = 0;
            let currentTime = 1000;

            // Update a replica with a new value
            function updateReplica(replica) {
                const inputField = document.getElementById(`input-${replica}`);
                const value = inputField.value.trim();

                if (value.length === 0) return;

                // Generate a new timestamp (current time + random offset to simulate time passing)
                currentTime += Math.floor(Math.random() * 500) + 100;
                const newTimestamp = currentTime;

                // Update the replica
                replicas[replica] = {
                    value: value,
                    timestamp: newTimestamp,
                };

                // Update the UI
                document.getElementById(
                    `value-${replica.toLowerCase()}`,
                ).textContent = value;
                document.getElementById(
                    `timestamp-${replica.toLowerCase()}`,
                ).textContent = `Timestamp: ${newTimestamp}`;

                // Update the timestamp visualization
                const visualBar = document.querySelector(
                    `#replica-${replica.toLowerCase()} .timestamp-bar`,
                );
                const visualLabel = document.querySelector(
                    `#replica-${replica.toLowerCase()} .timestamp-label`,
                );
                visualBar.style.width = `${(newTimestamp - 1000) / 20}%`;
                visualLabel.textContent = `Time: ${newTimestamp}`;

                // Log the operation
                const logElement = document.getElementById(
                    `log-${replica.toLowerCase()}`,
                );
                const logEntry = document.createElement("div");
                logEntry.className = "log-entry";
                logEntry.textContent = `Updated to "${value}" at timestamp ${newTimestamp}`;
                logElement.appendChild(logEntry);

                // Scroll to bottom of log
                logElement.scrollTop = logElement.scrollHeight;

                // Store the operation
                operations.push({
                    type: "update",
                    replica: replica,
                    value: value,
                    timestamp: newTimestamp,
                });

                updateStats();
            }

            // Sync replicas
            function syncReplicas() {
                syncEvents++;

                // Determine which replica has the latest timestamp
                const a = replicas["A"];
                const b = replicas["B"];

                if (a.timestamp > b.timestamp) {
                    // Replica A has the latest value
                    replicas["B"] = { value: a.value, timestamp: a.timestamp };
                    updateReplicaUI("B", a.value, a.timestamp);
                    conflictsResolved++;

                    // Log the sync
                    logSync("B", "A", a.value, a.timestamp);
                } else if (b.timestamp > a.timestamp) {
                    // Replica B has the latest value
                    replicas["A"] = { value: b.value, timestamp: b.timestamp };
                    updateReplicaUI("A", b.value, b.timestamp);
                    conflictsResolved++;

                    // Log the sync
                    logSync("A", "B", b.value, b.timestamp);
                } else {
                    // Timestamps are equal, values are already the same
                    const logA = document.getElementById("log-a");
                    const logB = document.getElementById("log-b");

                    const entryA = document.createElement("div");
                    entryA.className = "log-entry";
                    entryA.textContent =
                        "Synchronized - values already consistent";
                    logA.appendChild(entryA);

                    const entryB = document.createElement("div");
                    entryB.className = "log-entry";
                    entryB.textContent =
                        "Synchronized - values already consistent";
                    logB.appendChild(entryB);

                    logA.scrollTop = logA.scrollHeight;
                    logB.scrollTop = logB.scrollHeight;
                }

                updateStats();
            }

            // Update replica UI
            function updateReplicaUI(replica, value, timestamp) {
                const replicaEl = document.getElementById(
                    `value-${replica.toLowerCase()}`,
                );
                const timestampEl = document.getElementById(
                    `timestamp-${replica.toLowerCase()}`,
                );
                const visualBar = document.querySelector(
                    `#replica-${replica.toLowerCase()} .timestamp-bar`,
                );
                const visualLabel = document.querySelector(
                    `#replica-${replica.toLowerCase()} .timestamp-label`,
                );

                replicaEl.textContent = value;
                timestampEl.textContent = `Timestamp: ${timestamp}`;
                visualBar.style.width = `${(timestamp - 1000) / 20}%`;
                visualLabel.textContent = `Time: ${timestamp}`;
            }

            // Log synchronization
            function logSync(toReplica, fromReplica, value, timestamp) {
                const logElement = document.getElementById(
                    `log-${toReplica.toLowerCase()}`,
                );
                const logEntry = document.createElement("div");
                logEntry.className = "log-entry";
                logEntry.textContent = `Synchronized from Replica ${fromReplica}: "${value}" (timestamp ${timestamp})`;
                logElement.appendChild(logEntry);
                logElement.scrollTop = logElement.scrollHeight;
            }

            // Reset replicas to initial state
            function resetReplicas() {
                replicas = {
                    A: { value: "Hello", timestamp: 1000 },
                    B: { value: "Hello", timestamp: 1000 },
                };

                currentTime = 1000;
                operations = [];
                syncEvents = 0;
                conflictsResolved = 0;

                // Reset UI
                updateReplicaUI("A", "Hello", 1000);
                updateReplicaUI("B", "Hello", 1000);

                document.getElementById("input-a").value = "Hello";
                document.getElementById("input-b").value = "World";

                // Clear logs
                document.getElementById("log-a").innerHTML =
                    '<div class="log-entry">Initialized with "Hello" at timestamp 1000</div>';
                document.getElementById("log-b").innerHTML =
                    '<div class="log-entry">Initialized with "Hello" at timestamp 1000</div>';

                updateStats();
            }

            // Update statistics
            function updateStats() {
                document.getElementById("ops-count").textContent =
                    operations.length;
                document.getElementById("sync-count").textContent = syncEvents;
                document.getElementById("conflict-count").textContent =
                    conflictsResolved;
            }

            // Initialize the visualization
            window.addEventListener("load", resetReplicas);
        </script>
    </body>
</html>
