<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merkle Tree Internal Working</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #27ae60, #2ecc71, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.3rem;
            margin-bottom: 40px;
        }

        .step-section {
            margin: 40px 0;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 6px solid #27ae60;
            position: relative;
            overflow: hidden;
        }

        .step-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #27ae60, #2ecc71, #3498db);
        }

        .step-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .step-number {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .data-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .data-block {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .data-block:hover {
            transform: translateY(-5px);
        }

        .hash-process {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .hash-input {
            background: #74b9ff;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: bold;
            min-width: 120px;
            text-align: center;
        }

        .hash-function {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
        }

        .hash-output {
            background: #00b894;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-width: 150px;
            word-break: break-all;
        }

        .arrow {
            font-size: 1.8rem;
            color: #e17055;
            font-weight: bold;
        }

        .merkle-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            margin: 40px 0;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #e9ecef;
        }

        .tree-level {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .tree-node {
            padding: 15px 20px;
            border-radius: 12px;
            font-weight: bold;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            transition: all 0.3s ease;
        }

        .tree-node:hover {
            transform: scale(1.05);
        }

        .leaf-node {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .internal-node {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
        }

        .root-node {
            background: linear-gradient(135deg, #e17055, #d63031);
            color: white;
            border: 3px solid #fff;
            font-size: 1.1rem;
        }

        .tree-connections {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: -15px 0;
        }

        .connection-line {
            width: 3px;
            height: 30px;
            background: #bdc3c7;
            position: relative;
        }

        .connection-line::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            width: 13px;
            height: 13px;
            background: #bdc3c7;
            border-radius: 50%;
        }

        .hash-display {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            margin-top: 8px;
            padding: 5px 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            word-break: break-all;
        }

        .verification-demo {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .verification-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .verification-step {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .step-header {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #fdcb6e;
        }

        .proof-path {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .proof-node {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border: 2px solid rgba(255, 255, 255, 0.4);
        }

        .proof-arrow {
            color: #fdcb6e;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .applications {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .application-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #27ae60;
            transition: transform 0.3s ease;
        }

        .application-card:hover {
            transform: translateY(-3px);
        }

        .app-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .app-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .benefit-card {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .benefit-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .benefit-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .highlight {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight h3 {
            color: #856404;
            margin-top: 0;
        }

        .comparison-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

        .table-header {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            font-weight: bold;
        }

        .table-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 15px;
            border-bottom: 1px solid #eee;
            align-items: center;
        }

        .table-row:nth-child(even) {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .hash-process {
                flex-direction: column;
            }
            
            .tree-level {
                gap: 20px;
            }
            
            .table-header,
            .table-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌳 Merkle Tree Internal Working</h1>
        <p class="subtitle">The cryptographic data structure that powers blockchain integrity and efficient verification</p>

        <!-- Step 1: Data Blocks -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">1</div>
                <span>Starting with Data Blocks</span>
            </div>
            <p>Merkle trees begin with individual pieces of data that need to be organized and verified:</p>
            <div class="data-blocks">
                <div class="data-block">
                    <div style="font-size: 1.1rem; margin-bottom: 8px;">Transaction A</div>
                    <div style="font-size: 0.9rem;">Alice → Bob: $50</div>
                </div>
                <div class="data-block">
                    <div style="font-size: 1.1rem; margin-bottom: 8px;">Transaction B</div>
                    <div style="font-size: 0.9rem;">Bob → Charlie: $30</div>
                </div>
                <div class="data-block">
                    <div style="font-size: 1.1rem; margin-bottom: 8px;">Transaction C</div>
                    <div style="font-size: 0.9rem;">Charlie → Dave: $20</div>
                </div>
                <div class="data-block">
                    <div style="font-size: 1.1rem; margin-bottom: 8px;">Transaction D</div>
                    <div style="font-size: 0.9rem;">Dave → Eve: $15</div>
                </div>
            </div>
        </div>

        <!-- Step 2: Hash Generation -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">2</div>
                <span>Creating Cryptographic Hashes</span>
            </div>
            <p>Each data block is processed through a cryptographic hash function (usually SHA-256):</p>
            <div class="hash-process">
                <div class="hash-input">Transaction A<br>Alice → Bob: $50</div>
                <div class="arrow">→</div>
                <div class="hash-function">SHA-256</div>
                <div class="arrow">→</div>
                <div class="hash-output">a1b2c3d4...</div>
            </div>
            <div class="hash-process">
                <div class="hash-input">Transaction B<br>Bob → Charlie: $30</div>
                <div class="arrow">→</div>
                <div class="hash-function">SHA-256</div>
                <div class="arrow">→</div>
                <div class="hash-output">e5f6g7h8...</div>
            </div>
            <p style="margin-top: 20px; font-style: italic; color: #7f8c8d;">
                Each hash is a unique 256-bit fingerprint. Even tiny changes in data produce completely different hashes.
            </p>
        </div>

        <!-- Step 3: Tree Construction -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">3</div>
                <span>Building the Tree Structure</span>
            </div>
            <p>Hashes are combined in pairs, level by level, until reaching a single root hash:</p>
            <div class="merkle-tree">
                <!-- Root Level -->
                <div class="tree-level">
                    <div class="tree-node root-node">
                        ROOT HASH
                        <div class="hash-display">9a8b7c6d5e4f...</div>
                    </div>
                </div>
                
                <!-- Connections Level 1 -->
                <div class="tree-connections">
                    <div class="connection-line"></div>
                    <div style="width: 100px;"></div>
                    <div class="connection-line"></div>
                </div>
                
                <!-- Internal Level -->
                <div class="tree-level">
                    <div class="tree-node internal-node">
                        Hash(A+B)
                        <div class="hash-display">3c4d5e6f...</div>
                    </div>
                    <div class="tree-node internal-node">
                        Hash(C+D)
                        <div class="hash-display">7g8h9i0j...</div>
                    </div>
                </div>
                
                <!-- Connections Level 2 -->
                <div class="tree-connections">
                    <div class="connection-line"></div>
                    <div class="connection-line"></div>
                    <div style="width: 50px;"></div>
                    <div class="connection-line"></div>
                    <div class="connection-line"></div>
                </div>
                
                <!-- Leaf Level -->
                <div class="tree-level">
                    <div class="tree-node leaf-node">
                        Hash(A)
                        <div class="hash-display">a1b2c3d4...</div>
                    </div>
                    <div class="tree-node leaf-node">
                        Hash(B)
                        <div class="hash-display">e5f6g7h8...</div>
                    </div>
                    <div class="tree-node leaf-node">
                        Hash(C)
                        <div class="hash-display">i9j0k1l2...</div>
                    </div>
                    <div class="tree-node leaf-node">
                        Hash(D)
                        <div class="hash-display">m3n4o5p6...</div>
                    </div>
                </div>
            </div>
            <p style="text-align: center; margin-top: 20px; font-weight: bold; color: #27ae60;">
                The root hash represents the entire dataset. Any change in any transaction changes the root hash!
            </p>
        </div>

        <!-- Step 4: Verification Process -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">4</div>
                <span>Merkle Proof Verification</span>
            </div>
            <div class="verification-demo">
                <h3>🔍 Verifying Transaction B without downloading the entire dataset</h3>
                <p>To prove Transaction B exists, you only need a "Merkle Proof" - a path from the leaf to the root:</p>
                
                <div class="verification-steps">
                    <div class="verification-step">
                        <div class="step-header">Step 1: Provide Transaction B</div>
                        <p>The data to be verified: "Bob → Charlie: $30"</p>
                    </div>
                    
                    <div class="verification-step">
                        <div class="step-header">Step 2: Provide Sibling Hashes</div>
                        <p>Only need Hash(A) and Hash(C+D) to reconstruct the path to root</p>
                    </div>
                    
                    <div class="verification-step">
                        <div class="step-header">Step 3: Compute Missing Hashes</div>
                        <p>Calculate Hash(B), then Hash(A+B), then Root Hash</p>
                    </div>
                    
                    <div class="verification-step">
                        <div class="step-header">Step 4: Compare with Known Root</div>
                        <p>If computed root matches known root, Transaction B is verified!</p>
                    </div>
                </div>
                
                <h4 style="text-align: center; margin: 25px 0;">Verification Path:</h4>
                <div class="proof-path">
                    <div class="proof-node">Hash(A)<br>a1b2c3d4...</div>
                    <div class="proof-arrow">+</div>
                    <div class="proof-node">Hash(B)<br>computed</div>
                    <div class="proof-arrow">→</div>
                    <div class="proof-node">Hash(A+B)<br>3c4d5e6f...</div>
                    <div class="proof-arrow">+</div>
                    <div class="proof-node">Hash(C+D)<br>7g8h9i0j...</div>
                    <div class="proof-arrow">→</div>
                    <div class="proof-node">ROOT<br>9a8b7c6d...</div>
                </div>
                
                <div style="background: rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 10px; margin-top: 20px;">
                    <strong>Efficiency:</strong> Instead of downloading all 4 transactions (potentially GB of data), 
                    you only need 2 hash values (64 bytes) plus the transaction to verify!
                </div>
            </div>
        </div>

        <!-- Benefits -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">5</div>
                <span>Key Benefits & Properties</span>
            </div>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">⚡</div>
                    <div class="benefit-title">Efficient Verification</div>
                    <div>Verify any piece of data with only O(log n) hashes instead of O(n) data</div>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">🔒</div>
                    <div class="benefit-title">Tamper Detection</div>
                    <div>Any change in data changes the root hash, making tampering immediately detectable</div>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">📦</div>
                    <div class="benefit-title">Space Efficient</div>
                    <div>Store single root hash instead of entire dataset for integrity checking</div>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">🔗</div>
                    <div class="benefit-title">Parallel Processing</div>
                    <div>Tree construction can be parallelized, making it fast for large datasets</div>
                </div>
            </div>
        </div>

        <!-- Applications -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">6</div>
                <span>Real-World Applications</span>
            </div>
            <div class="applications">
                <div class="application-card">
                    <div class="app-icon">₿</div>
                    <div class="app-title">Bitcoin & Blockchain</div>
                    <p>Every block contains a Merkle root of all transactions. Light clients can verify transactions without downloading entire blockchain.</p>
                </div>
                <div class="application-card">
                    <div class="app-icon">📁</div>
                    <div class="app-title">Git Version Control</div>
                    <p>Git uses Merkle trees to efficiently track changes in codebases and verify repository integrity.</p>
                </div>
                <div class="application-card">
                    <div class="app-icon">🌐</div>
                    <div class="app-title">IPFS & Distributed Storage</div>
                    <p>InterPlanetary File System uses Merkle trees for content addressing and deduplication.</p>
                </div>
                <div class="application-card">
                    <div class="app-icon">☁️</div>
                    <div class="app-title">Cloud Storage Verification</div>
                    <p>Verify data integrity in cloud storage without downloading entire files, used by services like Dropbox.</p>
                </div>
                <div class="application-card">
                    <div class="app-icon">🔄</div>
                    <div class="app-title">Database Replication</div>
                    <p>Efficiently synchronize databases by comparing Merkle roots and only updating changed subtrees.</p>
                </div>
                <div class="application-card">
                    <div class="app-icon">🛡️</div>
                    <div class="app-title">Certificate Transparency</div>
                    <p>Public logs of SSL certificates use Merkle trees for efficient auditing and verification.</p>
                </div>
            </div>
        </div>

        <!-- Complexity Comparison -->
        <div class="step-section">
            <div class="step-title">
                <div class="step-number">7</div>
                <span>Efficiency Comparison</span>
            </div>
            <div class="comparison-table">
                <div class="table-header">
                    <div>Operation</div>
                    <div>Without Merkle Tree</div>
                    <div>With Merkle Tree</div>
                </div>
                <div class="table-row">
                    <div><strong>Verify single item</strong></div>
                    <div>O(n) - scan all data</div>
                    <div>O(log n) - proof path</div>
                </div>
                <div class="table-row">
                    <div><strong>Storage for verification</strong></div>
                    <div>O(n) - entire dataset</div>
                    <div>O(1) - just root hash</div>
                </div>
                <div class="table-row">
                    <div><strong>Detect tampering</strong></div>
                    <div>O(n) - check all items</div>
                    <div>O(1) - compare root hashes</div>
                </div>
                <div class="table-row">
                    <div><strong>Network transfer</strong></div>
                    <div>O(n) - full dataset</div>
                    <div>O(log n) - proof only</div>
                </div>
            </div>
        </div>

        <div class="highlight">
            <h3>🎯 The Merkle Tree Magic</h3>
            <p><strong>Logarithmic Verification:</strong> The tree structure reduces verification complexity from O(n) to O(log n). For 1 million transactions, instead of checking all 1 million, you only need about 20 hash values!</p>
            
            <p><strong>The Cascade Effect:</strong> When any leaf changes, it bubbles up through parent nodes to change the root. This creates a unique "fingerprint" for the entire dataset that's extremely sensitive to changes.</p>
            
            <p><strong>Trust Without Download:</strong> You can verify data integrity without trusting the source or downloading everything. Just get the root hash from a trusted source, then verify individual pieces with minimal data transfer.</p>
            
            <p><strong>Why It Powers Modern Systems:</strong> From Bitcoin's blockchain to Git's version control, Merkle trees solve the fundamental problem of efficient, trustworthy verification in distributed systems. They make it possible to have "light clients" that can verify without massive storage requirements!</p>
        </div>
    </div>
</body>
</html>
