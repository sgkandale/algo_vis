<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paxos Consensus | AlgoViz Hub</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #0f172a;
        --secondary: #1e293b;
        --accent: #6366f1;
        --accent-light: #818cf8;
        --accent-glow: rgba(99, 102, 241, 0.2);
        --text: #e2e8f0;
        --text-secondary: #94a3b8;
        --card-bg: rgba(30, 41, 59, 0.7);
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --transition: all 0.3s ease;
        --radius: 12px;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        --glow: 0 0 15px var(--accent-glow);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: var(--text);
        font-family: "Roboto", sans-serif;
        line-height: 1.6;
        min-height: 100vh;
        padding: 0;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 10% 20%,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 20%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(129, 140, 248, 0.1) 0%,
            transparent 20%
          );
        z-index: -1;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        position: relative;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: var(--accent);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--glow);
      }

      .logo-icon i {
        font-size: 24px;
        color: white;
      }

      .logo-text h1 {
        font-family: "Roboto Mono", monospace;
        font-weight: 700;
        font-size: 28px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .logo-text p {
        font-size: 14px;
        color: var(--text-secondary);
        letter-spacing: 1.5px;
      }

      .breadcrumb {
        font-size: 14px;
        color: var(--text-secondary);
        margin-top: 10px;
      }

      .breadcrumb a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        text-decoration: underline;
      }

      /* Algorithm Header */
      .algorithm-header {
        margin: 40px 0;
        text-align: center;
        padding: 20px;
        background: var(--card-bg);
        border-radius: var(--radius);
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .algorithm-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .algorithm-header h1 {
        font-size: 42px;
        margin-bottom: 15px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 800;
      }

      .algorithm-header .category {
        font-size: 18px;
        color: var(--accent-light);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .complexity-badge {
        display: inline-block;
        background: rgba(129, 140, 248, 0.2);
        color: var(--accent-light);
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: 600;
        font-family: "Roboto Mono", monospace;
        margin-top: 15px;
      }

      /* Main Content Layout */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 30px;
        margin-bottom: 40px;
      }

      @media (max-width: 900px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      /* Algorithm Detail Sections */
      .section {
        background: var(--card-bg);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .section h2 {
        font-size: 26px;
        margin-bottom: 20px;
        color: var(--accent-light);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .section h2 i {
        color: var(--accent);
        width: 36px;
        height: 36px;
        background: rgba(99, 102, 241, 0.2);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .section p {
        color: var(--text-secondary);
        font-size: 17px;
        line-height: 1.8;
        margin-bottom: 20px;
      }

      .key-points {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }

      .point-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
      }

      .point-card h3 {
        color: var(--accent-light);
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .point-card h3 i {
        color: var(--accent);
      }

      .point-card p {
        margin-bottom: 0;
        font-size: 15px;
      }

      /* Visualization Console */
      .visualization-console {
        background: rgba(15, 23, 42, 0.8);
        border-radius: var(--radius);
        padding: 25px;
        margin: 30px 0;
        border: 1px solid rgba(99, 102, 241, 0.3);
        box-shadow: var(--glow);
      }

      .console-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .console-header h3 {
        color: var(--accent-light);
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .console-controls {
        display: flex;
        gap: 10px;
      }

      .console-btn {
        background: var(--accent);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Roboto Mono", monospace;
        transition: var(--transition);
      }

      .console-btn:hover {
        background: var(--accent-light);
      }

      .console-btn.secondary {
        background: rgba(148, 163, 184, 0.2);
      }

      .console-btn:disabled {
        background: rgba(148, 163, 184, 0.1);
        cursor: not-allowed;
        opacity: 0.7;
      }

      .visualization-area {
        height: 400px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        padding: 20px;
      }

      .cluster-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        flex-wrap: wrap;
        height: 100%;
        width: 100%;
      }

      .node {
        width: 100px;
        height: 120px;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        transition: var(--transition);
      }

      .node-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
        border: 3px solid var(--accent-light);
        background: rgba(30, 41, 59, 0.7);
        box-shadow: 0 0 10px rgba(129, 140, 248, 0.3);
        position: relative;
        z-index: 2;
        transition: var(--transition);
      }

      .node.proposer .node-circle {
        background: rgba(16, 185, 129, 0.2);
        border-color: var(--success);
        box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
      }

      .node.acceptor .node-circle {
        background: rgba(99, 102, 241, 0.2);
        border-color: var(--accent);
      }

      .node.learner .node-circle {
        background: rgba(245, 158, 11, 0.2);
        border-color: var(--warning);
        box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
      }

      .node-label {
        margin-top: 10px;
        text-align: center;
        font-size: 14px;
        font-weight: bold;
      }

      .node-state {
        position: absolute;
        top: -20px;
        font-size: 12px;
        color: var(--accent-light);
        white-space: nowrap;
      }

      .message {
        position: absolute;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid var(--accent-light);
        border-radius: 4px;
        padding: 5px 8px;
        font-size: 12px;
        font-family: "Roboto Mono", monospace;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .message.show {
        opacity: 1;
      }

      .status-message {
        position: absolute;
        top: 20px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        color: var(--accent-light);
      }

      .controls-row {
        display: flex;
        gap: 10px;
        margin-top: 20px;
        justify-content: center;
      }

      .simulation-controls {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        justify-content: center;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 15px;
      }

      .speed-control input {
        width: 100%;
      }

      .log-container {
        position: absolute;
        bottom: 10px;
        width: 90%;
        height: 80px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 8px;
        padding: 10px;
        font-family: "Roboto Mono", monospace;
        font-size: 12px;
        overflow-y: auto;
      }

      .log-entry {
        margin-bottom: 5px;
        padding-bottom: 3px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }

      /* Algorithm Properties */
      .properties-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .property-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        text-align: center;
      }

      .property-card h4 {
        color: var(--text-secondary);
        font-size: 14px;
        margin-bottom: 8px;
        font-weight: 400;
      }

      .property-card .value {
        font-size: 20px;
        font-weight: 700;
        color: var(--accent-light);
        font-family: "Roboto Mono", monospace;
      }

      .property-card .value.warning {
        color: var(--warning);
      }

      .property-card .value.danger {
        color: var(--danger);
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 40px 0 30px;
        color: var(--text-secondary);
        font-size: 14px;
        border-top: 1px solid rgba(148, 163, 184, 0.1);
        margin-top: 40px;
      }

      footer p {
        margin: 10px 0;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-top: 15px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .footer-links a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        color: var(--accent);
      }

      /* Animations */
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      .floating {
        animation: float 6s ease-in-out infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.05);
          opacity: 0.8;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes highlight {
        0% {
          background: var(--accent-light);
        }
        50% {
          background: var(--warning);
          box-shadow: 0 0 15px var(--warning);
        }
        100% {
          background: var(--accent-light);
        }
      }

      .highlight-anim {
        animation: highlight 0.5s ease-in-out;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          gap: 25px;
          text-align: center;
        }

        .algorithm-header h1 {
          font-size: 32px;
        }

        .key-points {
          grid-template-columns: 1fr;
        }

        .cluster-container {
          gap: 20px;
        }

        .node {
          width: 80px;
          height: 100px;
        }

        .node-circle {
          width: 60px;
          height: 60px;
          font-size: 12px;
        }
      }

      @media (max-width: 480px) {
        .cluster-container {
          gap: 10px;
        }

        .node {
          width: 70px;
          height: 90px;
        }

        .node-circle {
          width: 50px;
          height: 50px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header>
        <div class="logo">
          <div class="logo-icon floating">
            <i class="fas fa-network-wired"></i>
          </div>
          <div class="logo-text">
            <h1>AlgoViz Hub</h1>
            <p>ALGORITHM VISUALIZATION REPOSITORY</p>
            <div class="breadcrumb">
              <a href="#"><i class="fas fa-home"></i> Home</a> >
              <a href="#">Distributed Algorithms</a> >
              <span>Paxos Consensus</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Algorithm Header -->
      <div class="algorithm-header">
        <h1>Paxos Consensus</h1>
        <div class="category">
          <i class="fas fa-brain"></i> Distributed Consensus Protocol
        </div>
        <div class="complexity-badge">
          Fault-tolerant • Asynchronous • Guaranteed Safety
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Left Column: Algorithm Details -->
        <div class="left-column">
          <!-- Description Section -->
          <div class="section">
            <h2><i class="fas fa-file-alt"></i> Algorithm Overview</h2>
            <p>
              Paxos is a family of protocols for solving consensus in a network
              of unreliable processors. It ensures that a distributed system can
              agree on a single value even when some nodes fail or messages are
              lost.
            </p>
            <p>
              The protocol involves three roles: <strong>Proposers</strong> (who
              propose values), <strong>Acceptors</strong> (who accept
              proposals), and <strong>Learners</strong> (who learn the chosen
              value). Paxos guarantees safety (only one value is chosen) and
              liveness (a value is eventually chosen) under certain conditions.
            </p>

            <div class="key-points">
              <div class="point-card">
                <h3><i class="fas fa-lightbulb"></i> Proposers</h3>
                <p>
                  Propose values to acceptors. May compete to have their value
                  chosen.
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-check-circle"></i> Acceptors</h3>
                <p>
                  Accept proposed values and form quorums to decide on a value.
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-book"></i> Learners</h3>
                <p>Discover the value that has been chosen by the acceptors.</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-shield-alt"></i> Quorums</h3>
                <p>
                  Any majority of acceptors forms a quorum. Safety is maintained
                  as long as quorums overlap.
                </p>
              </div>
            </div>
          </div>

          <!-- Visualization Console -->
          <div class="section">
            <h2>
              <i class="fas fa-laptop-code"></i> Interactive Visualization
            </h2>
            <p>
              This visualization demonstrates the Paxos consensus protocol in
              action. You can propose values, simulate failures, and observe how
              nodes communicate to reach agreement.
            </p>

            <div class="visualization-console">
              <div class="console-header">
                <h3>
                  <i class="fas fa-project-diagram"></i> Paxos Consensus
                  Simulation
                </h3>
                <div class="console-controls">
                  <button class="console-btn" id="reset-btn">
                    <i class="fas fa-redo"></i> Reset
                  </button>
                  <button class="console-btn" id="run-btn">
                    <i class="fas fa-play"></i> Run
                  </button>
                </div>
              </div>

              <div class="visualization-area" id="visualization-area">
                <div class="status-message" id="status-message">
                  Initializing Paxos cluster...
                </div>
                <div class="cluster-container" id="cluster-container">
                  <!-- Nodes will be dynamically added here -->
                </div>
                <div class="log-container" id="log-container">
                  <!-- Log entries will appear here -->
                </div>
              </div>

              <div class="controls-row">
                <input
                  type="text"
                  id="proposal-value"
                  placeholder="Enter value to propose"
                  value="42"
                />
                <button class="console-btn" id="propose-btn">
                  <i class="fas fa-paper-plane"></i> Propose Value
                </button>
              </div>

              <div class="simulation-controls">
                <button class="console-btn secondary" id="fail-node-btn">
                  <i class="fas fa-skull"></i> Fail Random Node
                </button>
                <button class="console-btn secondary" id="recover-node-btn">
                  <i class="fas fa-heartbeat"></i> Recover All
                </button>
              </div>
            </div>
          </div>

          <!-- Algorithm Steps -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Algorithm Phases</h2>
            <p>Paxos operates in two main phases to achieve consensus:</p>

            <div class="key-points">
              <div class="point-card">
                <h3>
                  <i class="fas fa-envelope"></i> Phase 1: Prepare & Promise
                </h3>
                <p>
                  Proposer selects proposal number n and sends PREPARE(n) to
                  acceptors. Acceptors respond with PROMISE(n) if n is highest
                  they've seen, along with any previously accepted value.
                </p>
              </div>
              <div class="point-card">
                <h3>
                  <i class="fas fa-check-double"></i> Phase 2: Accept & Accepted
                </h3>
                <p>
                  If proposer receives PROMISE from majority, it sends ACCEPT(n,
                  v) with value v. If acceptor receives ACCEPT(n, v) for highest
                  n it's seen, it accepts and sends ACCEPTED(n, v).
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-graduation-cap"></i> Learning Phase</h3>
                <p>
                  When proposer receives ACCEPTED from majority, value is
                  chosen. Learners discover chosen value by receiving ACCEPTED
                  messages from acceptors.
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-sync-alt"></i> Failure Handling</h3>
                <p>
                  If no value is chosen, proposers retry with higher proposal
                  numbers. The protocol ensures safety even with message loss
                  and node failures.
                </p>
              </div>
            </div>
          </div>

          <!-- Pseudocode Section -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Pseudocode</h2>
            <div class="code-block">
              <pre><code>// Proposer:
function run_paxos(value):
    while not decided:
        n = generate_proposal_number()
        send PREPARE(n) to acceptors
        
        if receive PROMISE(n, v) from majority:
            if any PROMISE contained value:
                v = value from highest proposal number
            send ACCEPT(n, v) to acceptors
            
            if receive ACCEPTED(n) from majority:
                value is chosen
                notify learners

// Acceptor:
state:
    promised_n = 0
    accepted_n = 0
    accepted_value = null

on PREPARE(n):
    if n > promised_n:
        promised_n = n
        respond PROMISE(n, accepted_n, accepted_value)

on ACCEPT(n, v):
    if n >= promised_n:
        promised_n = n
        accepted_n = n
        accepted_value = v
        respond ACCEPTED(n)</code></pre>
            </div>
          </div>
        </div>

        <!-- Right Column: Additional Info -->
        <div class="right-column">
          <!-- Properties Section -->
          <div class="section">
            <h2><i class="fas fa-info-circle"></i> Algorithm Properties</h2>
            <div class="properties-grid">
              <div class="property-card">
                <h4>Category</h4>
                <div class="value">Consensus</div>
              </div>
              <div class="property-card">
                <h4>Type</h4>
                <div class="value">Asynchronous</div>
              </div>
              <div class="property-card">
                <h4>Fault Tolerance</h4>
                <div class="value">F < N/2 failures</div>
              </div>
              <div class="property-card">
                <h4>Safety</h4>
                <div class="value">Guaranteed</div>
              </div>
              <div class="property-card">
                <h4>Liveness</h4>
                <div class="value">Partial synchrony</div>
              </div>
              <div class="property-card">
                <h4>Rounds</h4>
                <div class="value">2 phases</div>
              </div>
              <div class="property-card">
                <h4>Messages</h4>
                <div class="value">O(N²) worst-case</div>
              </div>
              <div class="property-card">
                <h4>Complexity</h4>
                <div class="value">O(N) per operation</div>
              </div>
            </div>
          </div>

          <!-- Applications Section -->
          <div class="section">
            <h2><i class="fas fa-lightbulb"></i> Applications</h2>
            <p>
              Paxos is used in critical distributed systems requiring strong
              consistency:
            </p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                <strong>Google Chubby:</strong> Distributed lock service
              </li>
              <li style="margin-bottom: 10px">
                <strong>Amazon DynamoDB:</strong> Configuration management
              </li>
              <li style="margin-bottom: 10px">
                <strong>Apache ZooKeeper:</strong> Core consensus protocol
              </li>
              <li style="margin-bottom: 10px">
                <strong>Distributed Databases:</strong> Spanner, CockroachDB
              </li>
              <li>
                <strong>Blockchain Systems:</strong> Private blockchain
                consensus
              </li>
            </ul>
          </div>

          <!-- Key Concepts Section -->
          <div class="section">
            <h2><i class="fas fa-key"></i> Key Concepts</h2>
            <p>Understanding these terms is crucial for Paxos:</p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                <strong>Proposal Number:</strong> Unique, totally ordered
                identifier for each proposal
              </li>
              <li style="margin-bottom: 10px">
                <strong>Quorum:</strong> Majority of acceptors (N/2 + 1)
              </li>
              <li style="margin-bottom: 10px">
                <strong>Promise:</strong> Acceptor's guarantee not to accept
                proposals with lower numbers
              </li>
              <li style="margin-bottom: 10px">
                <strong>Chosen Value:</strong> Value that has been accepted by a
                quorum
              </li>
              <li>
                <strong>Liveness:</strong> Property that a value will eventually
                be chosen
              </li>
            </ul>
          </div>

          <!-- Comparison Section -->
          <div class="section">
            <h2><i class="fas fa-balance-scale"></i> Paxos vs Raft</h2>
            <p>How Paxos compares to the Raft consensus algorithm:</p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                <strong>Understandability:</strong> Raft was designed to be
                easier to understand than Paxos
              </li>
              <li style="margin-bottom: 10px">
                <strong>Leader Role:</strong> Raft has a strong leader while
                Paxos has multiple proposers
              </li>
              <li>
                <strong>Log Management:</strong> Raft manages logs directly
                while Paxos focuses on individual values
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/sgkandale/" target="_blank"
            ><i class="fa-brands fa-linkedin"></i> LinkedIN</a
          >
          <a href="mailto:me@sgkandale.com"
            ><i class="fa-solid fa-at"></i> E-Mail</a
          >
          <a href="https://buymeacoffee.com/sgkandale" target="_blank"
            ><i class="fa-solid fa-mug-hot"></i> Buy Me a Coffee</a
          >
        </div>
        <p>AlgoViz Hub - Interactive Algorithm Visualization Platform</p>
        <p>&copy; 2025 AlgoViz Hub. All rights reserved.</p>
      </footer>
    </div>

    <script>
      // DOM Elements
      const runBtn = document.getElementById("run-btn");
      const resetBtn = document.getElementById("reset-btn");
      const proposeBtn = document.getElementById("propose-btn");
      const failNodeBtn = document.getElementById("fail-node-btn");
      const recoverNodeBtn = document.getElementById("recover-node-btn");
      const proposalInput = document.getElementById("proposal-value");
      const clusterContainer = document.getElementById("cluster-container");
      const statusMessage = document.getElementById("status-message");
      const logContainer = document.getElementById("log-container");

      // Simulation state
      const nodes = [];
      let currentProposalNumber = 1;
      let chosenValue = null;
      let simulationInterval = null;
      let isRunning = false;
      let currentPhase = 0; // 0 = idle, 1 = prepare, 2 = accept

      // Initialize cluster
      function initCluster() {
        clusterContainer.innerHTML = "";
        logContainer.innerHTML = "";
        nodes.length = 0;
        currentProposalNumber = 1;
        chosenValue = null;
        currentPhase = 0;

        // Create 5 nodes: 2 proposers, 3 acceptors (who are also learners)
        const roles = [
          { type: "proposer", id: 1 },
          { type: "proposer", id: 2 },
          { type: "acceptor", id: 3 },
          { type: "acceptor", id: 4 },
          { type: "acceptor", id: 5 },
        ];

        roles.forEach((role) => {
          const node = {
            id: role.id,
            type: role.type,
            state: "ready",
            promisedProposal: 0,
            acceptedProposal: 0,
            acceptedValue: null,
            online: true,
          };
          nodes.push(node);
          createNodeElement(node);
        });

        statusMessage.textContent =
          "Paxos cluster initialized. Ready to propose a value.";
        addLogEntry(
          "System: Cluster initialized with 2 proposers and 3 acceptors"
        );
      }

      // Create visual node element
      function createNodeElement(node) {
        const nodeEl = document.createElement("div");
        nodeEl.className = `node ${node.type} ${node.online ? "" : "offline"}`;
        nodeEl.id = `node-${node.id}`;
        nodeEl.innerHTML = `
                <div class="node-state">${node.state}</div>
                <div class="node-circle">${node.type.toUpperCase()}</div>
                <div class="node-label">Node ${node.id}</div>
            `;
        clusterContainer.appendChild(nodeEl);
      }

      // Update node state display
      function updateNodeElement(node) {
        const nodeEl = document.getElementById(`node-${node.id}`);
        if (!nodeEl) return;

        const stateEl = nodeEl.querySelector(".node-state");
        if (stateEl) stateEl.textContent = node.state;

        nodeEl.className = `node ${node.type} ${node.online ? "" : "offline"}`;
      }

      // Add log entry
      function addLogEntry(message) {
        const entry = document.createElement("div");
        entry.className = "log-entry";
        entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        logContainer.appendChild(entry);
        logContainer.scrollTop = logContainer.scrollHeight;
      }

      // Simulate Prepare phase
      function startPreparePhase(proposerId, value) {
        const proposer = nodes.find((n) => n.id === proposerId);
        if (!proposer || !proposer.online) return;

        currentProposalNumber++;
        currentPhase = 1;
        proposer.state = `Preparing (n=${currentProposalNumber})`;
        updateNodeElement(proposer);

        statusMessage.textContent = `Node ${proposerId} starting Prepare phase with proposal #${currentProposalNumber}`;
        addLogEntry(
          `Proposer ${proposerId}: Sending PREPARE(${currentProposalNumber}) to acceptors`
        );

        // Send prepare to all acceptors
        const acceptors = nodes.filter(
          (n) => n.type === "acceptor" && n.online
        );
        let promises = 0;

        acceptors.forEach((acceptor) => {
          if (acceptor.promisedProposal < currentProposalNumber) {
            acceptor.promisedProposal = currentProposalNumber;
            acceptor.state = `Promised (n=${currentProposalNumber})`;
            updateNodeElement(acceptor);
            promises++;

            addLogEntry(
              `Acceptor ${acceptor.id}: PROMISE(${currentProposalNumber}) to proposer ${proposerId}`
            );
          } else {
            addLogEntry(
              `Acceptor ${acceptor.id}: Rejected PREPARE (already promised higher number)`
            );
          }
        });

        // Check if majority promised
        setTimeout(() => {
          if (promises >= Math.floor(acceptors.length / 2) + 1) {
            addLogEntry(
              `Proposer ${proposerId}: Received PROMISE from majority. Starting Accept phase.`
            );
            startAcceptPhase(proposerId, value);
          } else {
            addLogEntry(
              `Proposer ${proposerId}: Failed to get majority promises. Aborting.`
            );
            resetNodes();
          }
        }, 1500);
      }

      // Simulate Accept phase
      function startAcceptPhase(proposerId, value) {
        const proposer = nodes.find((n) => n.id === proposerId);
        if (!proposer || !proposer.online) return;

        currentPhase = 2;
        proposer.state = `Proposing (v=${value})`;
        updateNodeElement(proposer);

        statusMessage.textContent = `Node ${proposerId} proposing value ${value}`;
        addLogEntry(
          `Proposer ${proposerId}: Sending ACCEPT(n=${currentProposalNumber}, v=${value}) to acceptors`
        );

        // Send accept to all acceptors
        const acceptors = nodes.filter(
          (n) => n.type === "acceptor" && n.online
        );
        let accepts = 0;

        acceptors.forEach((acceptor) => {
          if (acceptor.promisedProposal <= currentProposalNumber) {
            acceptor.acceptedProposal = currentProposalNumber;
            acceptor.acceptedValue = value;
            acceptor.state = `Accepted (v=${value})`;
            updateNodeElement(acceptor);
            accepts++;

            addLogEntry(
              `Acceptor ${acceptor.id}: ACCEPTED(n=${currentProposalNumber}, v=${value})`
            );
          } else {
            addLogEntry(
              `Acceptor ${acceptor.id}: Rejected ACCEPT (promised higher number)`
            );
          }
        });

        // Check if majority accepted
        setTimeout(() => {
          if (accepts >= Math.floor(acceptors.length / 2) + 1) {
            chosenValue = value;
            statusMessage.textContent = `Value ${value} CHOSEN by consensus!`;
            addLogEntry(
              `Proposer ${proposerId}: Value ${value} CHOSEN by consensus!`
            );

            // Notify learners
            nodes.forEach((node) => {
              if (node.type === "acceptor" || node.type === "proposer") {
                node.state = `Learned (v=${value})`;
                updateNodeElement(node);
              }
            });

            addLogEntry(`System: Value ${value} learned by all nodes`);
          } else {
            addLogEntry(
              `Proposer ${proposerId}: Failed to get majority acceptance. Aborting.`
            );
            resetNodes();
          }
        }, 1500);
      }

      // Reset nodes to initial state
      function resetNodes() {
        nodes.forEach((node) => {
          if (node.online) {
            node.state = "ready";
            updateNodeElement(node);
          }
        });
        currentPhase = 0;
        statusMessage.textContent = "Ready to propose a new value";
      }

      // Fail a random node
      function failRandomNode() {
        const onlineNodes = nodes.filter((node) => node.online);
        if (onlineNodes.length < 2) {
          statusMessage.textContent = "Not enough online nodes to fail!";
          return;
        }

        const randomIndex = Math.floor(Math.random() * onlineNodes.length);
        const node = onlineNodes[randomIndex];
        node.online = false;
        node.state = "offline";

        statusMessage.textContent = `Node ${node.id} failed!`;
        updateNodeElement(node);
        addLogEntry(`System: Node ${node.id} failed!`);

        // If we're in a phase and a proposer fails, reset
        if (currentPhase > 0 && node.type === "proposer") {
          resetNodes();
          addLogEntry("System: Proposer failed! Aborting current proposal.");
        }
      }

      // Recover all nodes
      function recoverAllNodes() {
        nodes.forEach((node) => {
          node.online = true;
          node.state = "ready";
          updateNodeElement(node);
        });

        statusMessage.textContent = "All nodes recovered!";
        addLogEntry("System: All nodes recovered and reset to ready state");
      }

      // Initialize simulation
      function initSimulation() {
        initCluster();
      }

      // Event listeners
      runBtn.addEventListener("click", () => {
        if (isRunning) {
          clearInterval(simulationInterval);
          isRunning = false;
          runBtn.innerHTML = '<i class="fas fa-play"></i> Run';
        } else {
          isRunning = true;
          runBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
        }
      });

      resetBtn.addEventListener("click", () => {
        clearInterval(simulationInterval);
        isRunning = false;
        initSimulation();
        runBtn.innerHTML = '<i class="fas fa-play"></i> Run';
      });

      proposeBtn.addEventListener("click", () => {
        if (currentPhase !== 0) {
          statusMessage.textContent =
            "Cannot propose while another proposal is in progress";
          return;
        }

        const value = proposalInput.value || "42";
        const proposers = nodes.filter(
          (n) => n.type === "proposer" && n.online
        );
        if (proposers.length === 0) {
          statusMessage.textContent = "No online proposers!";
          return;
        }

        // Select a random proposer
        const proposer =
          proposers[Math.floor(Math.random() * proposers.length)];
        startPreparePhase(proposer.id, value);
      });

      failNodeBtn.addEventListener("click", failRandomNode);
      recoverNodeBtn.addEventListener("click", recoverAllNodes);

      // Initialize on load
      window.addEventListener("load", initSimulation);
    </script>
  </body>
</html>
