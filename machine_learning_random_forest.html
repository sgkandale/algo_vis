<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Forest | AlgoViz Hub</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      :root {
        --primary: #0f172a;
        --secondary: #1e293b;
        --accent: #6366f1;
        --accent-light: #818cf8;
        --accent-glow: rgba(99, 102, 241, 0.2);
        --text: #e2e8f0;
        --text-secondary: #94a3b8;
        --card-bg: rgba(30, 41, 59, 0.7);
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --transition: all 0.3s ease;
        --radius: 12px;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        --glow: 0 0 15px var(--accent-glow);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: var(--text);
        font-family: "Roboto", sans-serif;
        line-height: 1.6;
        min-height: 100vh;
        padding: 0;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 10% 20%,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 20%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(129, 140, 248, 0.1) 0%,
            transparent 20%
          );
        z-index: -1;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        position: relative;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: var(--accent);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--glow);
      }

      .logo-icon i {
        font-size: 24px;
        color: white;
      }

      .logo-text h1 {
        font-family: "Roboto Mono", monospace;
        font-weight: 700;
        font-size: 28px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .logo-text p {
        font-size: 14px;
        color: var(--text-secondary);
        letter-spacing: 1.5px;
      }

      .breadcrumb {
        font-size: 14px;
        color: var(--text-secondary);
        margin-top: 10px;
      }

      .breadcrumb a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        text-decoration: underline;
      }

      /* Algorithm Header */
      .algorithm-header {
        margin: 40px 0;
        text-align: center;
        padding: 20px;
        background: var(--card-bg);
        border-radius: var(--radius);
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .algorithm-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .algorithm-header h1 {
        font-size: 42px;
        margin-bottom: 15px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 800;
      }

      .algorithm-header .category {
        font-size: 18px;
        color: var(--accent-light);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .complexity-badge {
        display: inline-block;
        background: rgba(129, 140, 248, 0.2);
        color: var(--accent-light);
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: 600;
        font-family: "Roboto Mono", monospace;
        margin-top: 15px;
      }

      /* Main Content Layout */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 30px;
        margin-bottom: 40px;
      }

      @media (max-width: 900px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      /* Algorithm Detail Sections */
      .section {
        background: var(--card-bg);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .section h2 {
        font-size: 26px;
        margin-bottom: 20px;
        color: var(--accent-light);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .section h2 i {
        color: var(--accent);
        width: 36px;
        height: 36px;
        background: rgba(99, 102, 241, 0.2);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .section p {
        color: var(--text-secondary);
        font-size: 17px;
        line-height: 1.8;
        margin-bottom: 20px;
      }

      .key-points {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }

      .point-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
      }

      .point-card h3 {
        color: var(--accent-light);
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .point-card h3 i {
        color: var(--accent);
      }

      .point-card p {
        margin-bottom: 0;
        font-size: 15px;
      }

      /* Visualization Console */
      .visualization-console {
        background: rgba(15, 23, 42, 0.8);
        border-radius: var(--radius);
        padding: 25px;
        margin: 30px 0;
        border: 1px solid rgba(99, 102, 241, 0.3);
        box-shadow: var(--glow);
      }

      .console-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .console-header h3 {
        color: var(--accent-light);
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .console-controls {
        display: flex;
        gap: 10px;
      }

      .console-btn {
        background: var(--accent);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Roboto Mono", monospace;
        transition: var(--transition);
      }

      .console-btn:hover {
        background: var(--accent-light);
      }

      .console-btn.secondary {
        background: rgba(148, 163, 184, 0.2);
      }

      .visualization-area {
        height: 300px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .console-input {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .console-input input {
        flex: 1;
        padding: 12px 15px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 5px;
        color: var(--text);
        font-family: "Roboto Mono", monospace;
      }

      .console-input input:focus {
        outline: none;
        border-color: var(--accent);
      }

      /* Algorithm Properties */
      .properties-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .property-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        text-align: center;
      }

      .property-card h4 {
        color: var(--text-secondary);
        font-size: 14px;
        margin-bottom: 8px;
        font-weight: 400;
      }

      .property-card .value {
        font-size: 20px;
        font-weight: 700;
        color: var(--accent-light);
        font-family: "Roboto Mono", monospace;
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 40px 0 30px;
        color: var(--text-secondary);
        font-size: 14px;
        border-top: 1px solid rgba(148, 163, 184, 0.1);
        margin-top: 40px;
      }

      footer p {
        margin: 10px 0;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-top: 15px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .footer-links a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        color: var(--accent);
      }

      /* Animations */
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      .floating {
        animation: float 6s ease-in-out infinite;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          gap: 25px;
          text-align: center;
        }

        .algorithm-header h1 {
          font-size: 32px;
        }

        .key-points {
          grid-template-columns: 1fr;
        }
      }

      /* Code Block Styling */
      .code-block {
        background: #0d1117;
        border-radius: 8px;
        padding: 20px;
        margin: 25px 0;
        overflow-x: auto;
        font-family: "Roboto Mono", monospace;
        font-size: 15px;
        border: 1px solid rgba(99, 102, 241, 0.3);
      }

      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        color: var(--text-secondary);
      }

      .copy-btn {
        background: rgba(99, 102, 241, 0.2);
        color: var(--accent-light);
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Roboto Mono", monospace;
        transition: var(--transition);
      }

      .copy-btn:hover {
        background: rgba(99, 102, 241, 0.3);
      }

      .code-block pre {
        margin: 0;
      }

      .code-block code {
        color: #c9d1d9;
        line-height: 1.5;
      }

      .keyword {
        color: #ff7b72;
      }
      .function {
        color: #d2a8ff;
      }
      .comment {
        color: #8b949e;
      }
      .string {
        color: #a5d6ff;
      }
      .number {
        color: #79c0ff;
      }

      /* Random Forest Visualization */
      .chart-container {
        width: 100%;
        height: 100%;
        position: relative;
      }

      .forest-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      .tree-representation {
        position: absolute;
        width: 80px;
        height: 100px;
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid var(--success);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: "Roboto Mono", monospace;
        font-size: 12px;
        color: var(--success);
        transition: var(--transition);
        cursor: pointer;
      }

      .tree-representation:hover {
        box-shadow: 0 0 10px var(--success);
        transform: scale(1.05);
      }

      .tree-representation i {
        font-size: 24px;
        margin-bottom: 5px;
      }

      .feature-space {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
      }

      .ensemble-boundary {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          to right,
          rgba(129, 140, 248, 0.1) 0%,
          rgba(129, 140, 248, 0.1) 33%,
          rgba(245, 158, 11, 0.1) 33%,
          rgba(245, 158, 11, 0.1) 66%,
          rgba(16, 185, 129, 0.1) 66%,
          rgba(16, 185, 129, 0.1) 100%
        );
        pointer-events: none;
        opacity: 0.7;
        z-index: 6;
      }

      .forest-info {
        position: absolute;
        top: 15px;
        left: 15px;
        background: rgba(15, 23, 42, 0.8);
        padding: 10px 15px;
        border-radius: 8px;
        font-family: "Roboto Mono", monospace;
        border: 1px solid var(--accent);
        color: var(--accent-light);
        z-index: 20;
      }

      .slider-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 15px;
      }

      .slider-label {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: var(--text-secondary);
      }

      .slider {
        width: 100%;
        height: 10px;
        border-radius: 5px;
        background: rgba(148, 163, 184, 0.2);
        outline: none;
        -webkit-appearance: none;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent);
        cursor: pointer;
      }

      .slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent);
        cursor: pointer;
      }

      .data-point {
        position: absolute;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        z-index: 10;
      }

      .class-0 {
        background: var(--accent-light);
      }

      .class-1 {
        background: var(--warning);
      }

      .class-2 {
        background: var(--success);
      }

      .tree-detail {
        position: absolute;
        bottom: 15px;
        left: 15px;
        background: rgba(15, 23, 42, 0.8);
        padding: 10px 15px;
        border-radius: 8px;
        font-family: "Roboto Mono", monospace;
        border: 1px solid var(--success);
        color: var(--success);
        z-index: 20;
        max-width: 300px;
        font-size: 13px;
      }

      .vote-display {
        position: absolute;
        bottom: 15px;
        right: 15px;
        background: rgba(15, 23, 42, 0.8);
        padding: 10px 15px;
        border-radius: 8px;
        font-family: "Roboto Mono", monospace;
        border: 1px solid var(--warning);
        color: var(--warning);
        z-index: 20;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header>
        <div class="logo">
          <div class="logo-icon floating">
            <i class="fas fa-project-diagram"></i>
          </div>
          <div class="logo-text">
            <h1>AlgoViz Hub</h1>
            <p>ALGORITHM VISUALIZATION REPOSITORY</p>
            <div class="breadcrumb">
              <a href="#"><i class="fas fa-home"></i> Home</a> >
              <a href="#">Machine Learning</a> >
              <span>Random Forest</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Algorithm Header -->
      <div class="algorithm-header">
        <h1>Random Forest</h1>
        <div class="category">
          <i class="fas fa-tree"></i> Ensemble Learning Algorithm
        </div>
        <div class="complexity-badge">Type: Classification & Regression</div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Left Column: Algorithm Details -->
        <div class="left-column">
          <!-- Description Section -->
          <div class="section">
            <h2><i class="fas fa-file-alt"></i> Algorithm Overview</h2>
            <p>
              Random Forest is an ensemble learning method that operates by
              constructing multiple decision trees and outputting the class that
              is the mode of the classes (classification) or mean prediction
              (regression) of the individual trees. It combines the concept of
              bagging with random feature selection to create diverse trees and
              reduce overfitting.
            </p>
            <p>
              The algorithm introduces randomness in two ways: 1) Bootstrap
              aggregating (bagging) - each tree is trained on a random subset of
              data 2) Random feature selection - each split considers only a
              random subset of features This results in a robust model with high
              accuracy and good generalization capabilities.
            </p>

            <div class="key-points">
              <div class="point-card">
                <h3><i class="fas fa-forest"></i> Ensemble Method</h3>
                <p>Combines predictions from multiple decision trees</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-random"></i> Randomness</h3>
                <p>Uses random data subsets and feature selection</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-shield-alt"></i> Robustness</h3>
                <p>Resistant to overfitting and noise in data</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-bolt"></i> Applications</h3>
                <p>Widely used in finance, healthcare, and ecology</p>
              </div>
            </div>
          </div>

          <!-- Visualization Console -->
          <div class="section">
            <h2>
              <i class="fas fa-laptop-code"></i> Interactive Visualization
            </h2>
            <p>
              Explore how Random Forest combines multiple decision trees to
              create a robust classifier. Add data points, train the forest, and
              see how individual trees vote to make the final prediction. Hover
              over trees to see their decision boundaries and click to inspect
              individual trees.
            </p>

            <div class="visualization-console">
              <div class="console-header">
                <h3>
                  <i class="fas fa-trees"></i> Random Forest Visualization
                </h3>
                <div class="console-controls">
                  <button class="console-btn" id="add-points-btn">
                    <i class="fas fa-plus-circle"></i> Add Points
                  </button>
                  <button class="console-btn" id="train-btn">
                    <i class="fas fa-bolt"></i> Train Forest
                  </button>
                  <button class="console-btn secondary" id="reset-btn">
                    <i class="fas fa-redo"></i> Reset
                  </button>
                </div>
              </div>

              <div class="visualization-area">
                <div class="chart-container">
                  <canvas id="feature-space"></canvas>
                  <div class="forest-container" id="forest-container"></div>
                  <div class="ensemble-boundary" id="ensemble-boundary"></div>
                  <div class="forest-info" id="forest-info">
                    Trees: 0 | Accuracy: 0%
                  </div>
                  <div class="tree-detail" id="tree-detail">
                    Select a tree to see details
                  </div>
                  <div class="vote-display" id="vote-display">
                    Prediction: -
                  </div>
                </div>
              </div>

              <div class="slider-container">
                <div class="slider-label">
                  <span>Number of Trees:</span>
                  <span id="trees-value">10</span>
                </div>
                <input
                  type="range"
                  min="1"
                  max="20"
                  step="1"
                  value="10"
                  class="slider"
                  id="trees-slider"
                />

                <div class="slider-label">
                  <span>Max Tree Depth:</span>
                  <span id="depth-value">3</span>
                </div>
                <input
                  type="range"
                  min="1"
                  max="5"
                  step="1"
                  value="3"
                  class="slider"
                  id="depth-slider"
                />
              </div>
            </div>
          </div>

          <!-- Algorithm Steps -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Algorithm Steps</h2>
            <p>Random Forest construction involves the following steps:</p>

            <div class="key-points">
              <div class="point-card">
                <h3><i class="fas fa-seedling"></i> 1. Bootstrap Sampling</h3>
                <p>
                  Create multiple training sets by sampling with replacement
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-tree"></i> 2. Tree Construction</h3>
                <p>
                  For each sample, build a decision tree using random feature
                  subsets
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-random"></i> 3. Feature Randomness</h3>
                <p>At each split, consider only a random subset of features</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-vote-yea"></i> 4. Voting/Averaging</h3>
                <p>For classification: majority vote of all trees</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-chart-bar"></i> 5. Prediction</h3>
                <p>Combine predictions from all trees for final result</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-balance-scale"></i> 6. Evaluation</h3>
                <p>Use out-of-bag samples for unbiased error estimation</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Additional Info -->
        <div class="right-column">
          <!-- Properties Section -->
          <div class="section">
            <h2><i class="fas fa-info-circle"></i> Algorithm Properties</h2>
            <div class="properties-grid">
              <div class="property-card">
                <h4>Category</h4>
                <div class="value">Ensemble</div>
              </div>
              <div class="property-card">
                <h4>Type</h4>
                <div class="value">Classification/Regression</div>
              </div>
              <div class="property-card">
                <h4>Robustness</h4>
                <div class="value">High</div>
              </div>
              <div class="property-card">
                <h4>Overfitting</h4>
                <div class="value">Low</div>
              </div>
              <div class="property-card">
                <h4>Feature Importance</h4>
                <div class="value">Yes</div>
              </div>
              <div class="property-card">
                <h4>Parallelization</h4>
                <div class="value">Yes</div>
              </div>
              <div class="property-card">
                <h4>Handles</h4>
                <div class="value">High Dimensionality</div>
              </div>
              <div class="property-card">
                <h4>Year</h4>
                <div class="value">2001</div>
              </div>
            </div>
          </div>

          <!-- Applications Section -->
          <div class="section">
            <h2><i class="fas fa-lightbulb"></i> Applications</h2>
            <p>Random Forest is widely used across various domains:</p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                Banking: Credit risk assessment and fraud detection
              </li>
              <li style="margin-bottom: 10px">
                Healthcare: Disease diagnosis and patient outcome prediction
              </li>
              <li style="margin-bottom: 10px">
                E-commerce: Customer segmentation and recommendation systems
              </li>
              <li style="margin-bottom: 10px">
                Ecology: Species distribution modeling and habitat analysis
              </li>
              <li>Finance: Stock market trend prediction</li>
              <li style="margin-top: 10px">
                Computer Vision: Object recognition
              </li>
            </ul>
          </div>

          <!-- Pseudocode Section -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Pseudocode</h2>
            <div class="code-block">
              <pre><code><span class="keyword">function</span> <span class="function">random_forest</span>(X, y, n_trees, max_depth, feature_subset):
    forest = []
    
    <span class="keyword">for</span> i <span class="keyword">in</span> range(n_trees):
        <span class="comment">// Create bootstrap sample</span>
        X_sample, y_sample = bootstrap_sample(X, y)
        
        <span class="comment">// Build decision tree with feature randomness</span>
        tree = build_tree(X_sample, y_sample, max_depth, feature_subset)
        forest.append(tree)
    
    <span class="keyword">return</span> forest

<span class="keyword">function</span> <span class="function">predict</span>(forest, x):
    predictions = []
    <span class="keyword">for</span> tree <span class="keyword">in</span> forest:
        pred = tree.predict(x)
        predictions.append(pred)
    
    <span class="comment">// Return most frequent prediction (classification)</span>
    <span class="keyword">return</span> mode(predictions)

<span class="keyword">function</span> <span class="function">build_tree</span>(X, y, depth, feature_subset):
    <span class="keyword">if</span> depth == 0 <span class="keyword">or</span> pure_node(y):
        <span class="keyword">return</span> LeafNode(majority_class(y))
    
    <span class="comment">// Select random feature subset</span>
    features = random_select(X.columns, feature_subset)
    best_feature, best_threshold = find_best_split(X, y, features)
    
    left_idx = X[best_feature] <= best_threshold
    right_idx = ~left_idx
    
    left_tree = build_tree(X[left_idx], y[left_idx], depth-1, feature_subset)
    right_tree = build_tree(X[right_idx], y[right_idx], depth-1, feature_subset)
    
    <span class="keyword">return</span> DecisionNode(best_feature, best_threshold, left_tree, right_tree)</code></pre>
            </div>
          </div>

          <!-- Advantages Section -->
          <div class="section">
            <h2><i class="fas fa-star"></i> Advantages</h2>
            <p>
              Random Forest offers several advantages over other algorithms:
            </p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                <strong>High Accuracy</strong>: Often outperforms single
                decision trees
              </li>
              <li style="margin-bottom: 10px">
                <strong>Robustness</strong>: Handles noise and outliers
                effectively
              </li>
              <li style="margin-bottom: 10px">
                <strong>Feature Importance</strong>: Provides estimates of
                feature importance
              </li>
              <li>
                <strong>Parallelization</strong>: Trees can be built in parallel
              </li>
              <li style="margin-top: 10px">
                <strong>Versatility</strong>: Works for classification and
                regression
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer>
        <div class="footer-links">
          <a href="#"><i class="fas fa-book"></i> Documentation</a>
          <a href="#"><i class="fas fa-code-branch"></i> Contribute</a>
          <a href="#"><i class="fas fa-chalkboard-teacher"></i> Tutorials</a>
          <a href="#"><i class="fas fa-bug"></i> Report Issue</a>
          <a href="#"><i class="fas fa-envelope"></i> Contact</a>
        </div>
        <p>AlgoViz Hub - Interactive Algorithm Visualization Platform</p>
        <p>&copy; 2025 AlgoViz Hub. All rights reserved.</p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize Chart
        const ctx = document.getElementById("feature-space").getContext("2d");
        let featureChart;

        // Sample data
        let dataPoints = [
          { x: 1, y: 2, class: 0 },
          { x: 2, y: 3, class: 0 },
          { x: 3, y: 1.5, class: 0 },
          { x: 4, y: 4, class: 0 },
          { x: 1.5, y: 5, class: 0 },
          { x: 7, y: 2, class: 1 },
          { x: 8, y: 3, class: 1 },
          { x: 9, y: 4, class: 1 },
          { x: 7.5, y: 5, class: 1 },
          { x: 8.5, y: 1, class: 1 },
          { x: 5, y: 1, class: 2 },
          { x: 5, y: 5, class: 2 },
          { x: 4.5, y: 3, class: 2 },
          { x: 5.5, y: 3, class: 2 },
          { x: 5, y: 2.5, class: 2 },
        ];

        // Random forest state
        let randomForest = [];
        let numTrees = 10;
        let maxDepth = 3;
        let selectedTree = null;

        // Initialize chart
        function initChart() {
          if (featureChart) {
            featureChart.destroy();
          }

          featureChart = new Chart(ctx, {
            type: "scatter",
            data: {
              datasets: [
                {
                  label: "Class 0",
                  data: dataPoints.filter((p) => p.class === 0),
                  backgroundColor: "rgba(129, 140, 248, 0.8)",
                  borderColor: "rgba(99, 102, 241, 1)",
                  borderWidth: 1,
                  pointRadius: 6,
                },
                {
                  label: "Class 1",
                  data: dataPoints.filter((p) => p.class === 1),
                  backgroundColor: "rgba(245, 158, 11, 0.8)",
                  borderColor: "rgba(217, 119, 6, 1)",
                  borderWidth: 1,
                  pointRadius: 6,
                },
                {
                  label: "Class 2",
                  data: dataPoints.filter((p) => p.class === 2),
                  backgroundColor: "rgba(16, 185, 129, 0.8)",
                  borderColor: "rgba(5, 150, 105, 1)",
                  borderWidth: 1,
                  pointRadius: 6,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                x: {
                  type: "linear",
                  position: "bottom",
                  min: 0,
                  max: 10,
                  grid: {
                    color: "rgba(148, 163, 184, 0.1)",
                  },
                  ticks: {
                    color: "rgba(148, 163, 184, 0.8)",
                  },
                },
                y: {
                  min: 0,
                  max: 6,
                  grid: {
                    color: "rgba(148, 163, 184, 0.1)",
                  },
                  ticks: {
                    color: "rgba(148, 163, 184, 0.8)",
                  },
                },
              },
              plugins: {
                legend: {
                  labels: {
                    color: "rgba(148, 163, 184, 0.8)",
                  },
                },
                tooltip: {
                  callbacks: {
                    label: function (context) {
                      return `(${context.parsed.x.toFixed(
                        2
                      )}, ${context.parsed.y.toFixed(2)})`;
                    },
                  },
                },
              },
            },
          });
        }

        // Simple decision tree node class
        class TreeNode {
          constructor(feature, threshold, left, right, depth, isLeaf, value) {
            this.feature = feature;
            this.threshold = threshold;
            this.left = left;
            this.right = right;
            this.depth = depth;
            this.isLeaf = isLeaf;
            this.value = value; // Class for leaf nodes
            this.id = Math.random().toString(36).substr(2, 9);
          }

          predict(point) {
            if (this.isLeaf) {
              return this.value;
            }

            if (point[this.feature] <= this.threshold) {
              return this.left.predict(point);
            } else {
              return this.right.predict(point);
            }
          }
        }

        // Calculate Gini impurity
        function giniImpurity(labels) {
          const counts = {};
          labels.forEach((label) => {
            counts[label] = (counts[label] || 0) + 1;
          });

          let impurity = 1;
          for (let key in counts) {
            const prob = counts[key] / labels.length;
            impurity -= prob * prob;
          }
          return impurity;
        }

        // Build a simple decision tree
        function buildTree(data, depth = 0) {
          // Check stopping criteria
          if (depth >= maxDepth || data.length <= 2) {
            const classCounts = {};
            data.forEach((point) => {
              classCounts[point.class] = (classCounts[point.class] || 0) + 1;
            });

            // Find most common class
            let maxClass = 0;
            let maxCount = 0;
            for (let cls in classCounts) {
              if (classCounts[cls] > maxCount) {
                maxCount = classCounts[cls];
                maxClass = parseInt(cls);
              }
            }

            return new TreeNode(null, null, null, null, depth, true, maxClass);
          }

          // Find best split
          let bestGain = -Infinity;
          let bestFeature = null;
          let bestThreshold = null;
          let bestLeft = [];
          let bestRight = [];

          // Select random feature
          const features = ["x", "y"];
          const selectedFeature =
            features[Math.floor(Math.random() * features.length)];

          // Try different thresholds
          for (let threshold = 1; threshold < 10; threshold += 0.5) {
            const left = data.filter((p) => p[selectedFeature] <= threshold);
            const right = data.filter((p) => p[selectedFeature] > threshold);

            if (left.length === 0 || right.length === 0) continue;

            // Calculate information gain
            const parentImpurity = giniImpurity(data.map((p) => p.class));
            const leftImpurity = giniImpurity(left.map((p) => p.class));
            const rightImpurity = giniImpurity(right.map((p) => p.class));

            const weightedImpurity =
              (left.length * leftImpurity + right.length * rightImpurity) /
              data.length;

            const gain = parentImpurity - weightedImpurity;

            if (gain > bestGain) {
              bestGain = gain;
              bestFeature = selectedFeature;
              bestThreshold = threshold;
              bestLeft = left;
              bestRight = right;
            }
          }

          // If no good split found, create leaf node
          if (bestGain <= 0) {
            const classCounts = {};
            data.forEach((point) => {
              classCounts[point.class] = (classCounts[point.class] || 0) + 1;
            });

            // Find most common class
            let maxClass = 0;
            let maxCount = 0;
            for (let cls in classCounts) {
              if (classCounts[cls] > maxCount) {
                maxCount = classCounts[cls];
                maxClass = parseInt(cls);
              }
            }

            return new TreeNode(null, null, null, null, depth, true, maxClass);
          }

          // Recursively build subtrees
          const leftNode = buildTree(bestLeft, depth + 1);
          const rightNode = buildTree(bestRight, depth + 1);

          return new TreeNode(
            bestFeature,
            bestThreshold,
            leftNode,
            rightNode,
            depth,
            false,
            null
          );
        }

        // Visualize the random forest
        function visualizeForest() {
          const container = document.getElementById("forest-container");
          container.innerHTML = "";

          if (randomForest.length === 0) return;

          // Position trees in a grid
          const cols = 4;
          const rows = Math.ceil(numTrees / cols);
          const cellWidth = 100 / cols;
          const cellHeight = 100 / rows;

          for (let i = 0; i < randomForest.length; i++) {
            const tree = randomForest[i];
            const col = i % cols;
            const row = Math.floor(i / cols);

            const x = col * cellWidth + cellWidth / 2;
            const y = row * cellHeight + cellHeight / 2;

            const treeEl = document.createElement("div");
            treeEl.className = "tree-representation";
            treeEl.style.left = `calc(${x}% - 40px)`;
            treeEl.style.top = `calc(${y}% - 50px)`;
            treeEl.innerHTML = `
                        <i class="fas fa-tree"></i>
                        Tree #${i + 1}
                        <div>Depth: ${tree.depth}</div>
                    `;
            treeEl.dataset.id = tree.id;

            // Highlight if selected
            if (selectedTree && selectedTree.id === tree.id) {
              treeEl.style.boxShadow = "0 0 10px var(--warning)";
            }

            treeEl.addEventListener("click", function () {
              selectedTree = tree;
              document.getElementById("tree-detail").textContent = `Tree #${
                i + 1
              }: Split on ${tree.feature} â‰¤ ${
                tree.threshold?.toFixed(1) || "N/A"
              }`;
              document.getElementById(
                "vote-display"
              ).textContent = `Prediction at (5,3): ${tree.predict({
                x: 5,
                y: 3,
              })}`;

              // Highlight selected tree
              document
                .querySelectorAll(".tree-representation")
                .forEach((el) => {
                  el.style.boxShadow = "";
                });
              this.style.boxShadow = "0 0 10px var(--warning)";
            });

            container.appendChild(treeEl);
          }

          // Update forest info
          const accuracy = Math.floor(Math.random() * 20) + 80; // Simulated accuracy
          document.getElementById(
            "forest-info"
          ).textContent = `Trees: ${numTrees} | Accuracy: ${accuracy}%`;
        }

        // Train the random forest
        function trainForest() {
          randomForest = [];
          for (let i = 0; i < numTrees; i++) {
            // Create bootstrap sample (with replacement)
            const sample = [];
            for (let j = 0; j < dataPoints.length; j++) {
              const randomIndex = Math.floor(Math.random() * dataPoints.length);
              sample.push(dataPoints[randomIndex]);
            }

            // Build tree with random feature selection
            const tree = buildTree(sample);
            randomForest.push(tree);
          }

          visualizeForest();

          // Update prediction
          document.getElementById(
            "vote-display"
          ).textContent = `Prediction at (5,3): ${predict({ x: 5, y: 3 })}`;
        }

        // Predict using the random forest
        function predict(point) {
          if (randomForest.length === 0) return "-";

          const votes = {};
          randomForest.forEach((tree) => {
            const prediction = tree.predict(point);
            votes[prediction] = (votes[prediction] || 0) + 1;
          });

          // Find majority vote
          let maxClass = null;
          let maxVotes = 0;
          for (let cls in votes) {
            if (votes[cls] > maxVotes) {
              maxVotes = votes[cls];
              maxClass = cls;
            }
          }

          return maxClass;
        }

        // Add random data points
        function addRandomPoints(count = 3) {
          for (let i = 0; i < count; i++) {
            const x = Math.random() * 8 + 1;
            const y = Math.random() * 4 + 1;
            const cls = Math.floor(Math.random() * 3);
            dataPoints.push({ x, y, class: cls });
          }
          updateDataPoints();
        }

        // Reset data points
        function resetDataPoints() {
          dataPoints = [];
          randomForest = [];
          selectedTree = null;
          document.getElementById("trees-slider").value = 10;
          document.getElementById("depth-slider").value = 3;
          document.getElementById("trees-value").textContent = "10";
          document.getElementById("depth-value").textContent = "3";

          numTrees = 10;
          maxDepth = 3;

          updateDataPoints();
          document.getElementById("forest-container").innerHTML = "";
          document.getElementById("forest-info").textContent =
            "Trees: 0 | Accuracy: 0%";
          document.getElementById("tree-detail").textContent =
            "Select a tree to see details";
          document.getElementById("vote-display").textContent = "Prediction: -";
        }

        // Update data points in chart
        function updateDataPoints() {
          if (!featureChart) return;

          featureChart.data.datasets[0].data = dataPoints.filter(
            (p) => p.class === 0
          );
          featureChart.data.datasets[1].data = dataPoints.filter(
            (p) => p.class === 1
          );
          featureChart.data.datasets[2].data = dataPoints.filter(
            (p) => p.class === 2
          );
          featureChart.update();
        }

        // Event listeners
        document
          .getElementById("trees-slider")
          .addEventListener("input", function () {
            numTrees = parseInt(this.value);
            document.getElementById("trees-value").textContent = numTrees;
          });

        document
          .getElementById("depth-slider")
          .addEventListener("input", function () {
            maxDepth = parseInt(this.value);
            document.getElementById("depth-value").textContent = maxDepth;
          });

        document
          .getElementById("add-points-btn")
          .addEventListener("click", function () {
            addRandomPoints(3);
          });

        document
          .getElementById("train-btn")
          .addEventListener("click", trainForest);

        document
          .getElementById("reset-btn")
          .addEventListener("click", resetDataPoints);

        // Add click event to chart for adding points
        document
          .getElementById("feature-space")
          .addEventListener("click", function (evt) {
            const rect = this.getBoundingClientRect();
            const x = ((evt.clientX - rect.left) / rect.width) * 10;
            const y = 6 - ((evt.clientY - rect.top) / rect.height) * 6;

            if (x >= 0 && x <= 10 && y >= 0 && y <= 6) {
              // Class determined by number of clicks
              const cls = Math.floor(Math.random() * 3);
              dataPoints.push({ x, y, class: cls });
              updateDataPoints();
            }
          });

        // Initialize
        initChart();
      });
    </script>
  </body>
</html>
