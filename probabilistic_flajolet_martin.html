<!DOCTYPE html>

<html lang="en">
<head><meta content="Discover probabilistic data structures for approximate computing and big data" name="description"/><meta content="probabilistic data structure, bloom filter, count-min sketch, hyperloglog, flajolet-martin" name="keywords"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Flajolet-Martin Algorithm Visualization</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .intro {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .algorithm-history {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .history-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .history-card.flajolet {
            border-top: 5px solid #e74c3c;
        }

        .history-card.loglog {
            border-top: 5px solid #f39c12;
        }

        .history-card.hyperloglog {
            border-top: 5px solid #27ae60;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn.danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .btn.success {
            background: linear-gradient(45deg, #00b894, #00cec9);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .input-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .bitmap-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .bitmap-display {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 5px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .bit {
            aspect-ratio: 1;
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .bit.set {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-color: #e74c3c;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .bit.highlight {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border-color: #f39c12;
            animation: pulse 1s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1.1); }
        }

        .bit-label {
            font-size: 0.7rem;
            color: #7f8c8d;
            text-align: center;
            margin-top: 2px;
        }

        .processing-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .hash-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            word-break: break-all;
        }

        .binary-display {
            font-family: 'Courier New', monospace;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            word-spacing: 2px;
            line-height: 1.6;
        }

        .leading-zeros {
            background: #e74c3c;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .first-one {
            background: #f39c12;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .step-by-step {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .step {
            background: #f8f9fa;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 10px 10px 0;
        }

        .step.highlight {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            animation: highlight 1s ease;
        }

        @keyframes highlight {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .max-tracker {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .max-value {
            font-size: 3rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .explanation {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .explanation h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .formula {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 15px 0;
            font-size: 1.1rem;
        }

        .dataset-examples {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .dataset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: transform 0.2s ease;
        }

        .dataset-btn:hover {
            transform: translateY(-2px);
            background: #c0392b;
        }

        .elements-list {
            background: #ecf0f1;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .element-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #bdc3c7;
        }

        .element-entry:last-child {
            border-bottom: none;
        }

        .element-entry.recent {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            margin: 2px 0;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .variance-warning {
            background: #f39c12;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .improvement-note {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .bitmap-display {
                grid-template-columns: repeat(8, 1fr);
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .algorithm-history {
                grid-template-columns: 1fr;
            }
        }
    </style>
<meta content="Flajolet-Martin Algorithm Visualization" property="og:title"/><meta content="Discover probabilistic data structures for approximate computing and big data" property="og:description"/><meta content="article" property="og:type"/><meta content="https://sgkandale.github.io/probabilistic_flajolet_martin.html" property="og:url"/><meta content="AlgoViz Hub" property="og:site_name"/><meta content="summary" name="twitter:card"/><meta content="Flajolet-Martin Algorithm Visualization" name="twitter:title"/><meta content="Discover probabilistic data structures for approximate computing and big data" name="twitter:description"/><meta content="@sgkandale" name="twitter:site"/><link href="https://sgkandale.github.io/probabilistic_flajolet_martin.html" rel="canonical"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Flajolet-Martin Algorithm Visualization",
  "description": "Discover probabilistic data structures for approximate computing and big data",
  "author": {
    "@type": "Person",
    "name": "Shantanu Kandale"
  },
  "publisher": {
    "@type": "Organization",
    "name": "AlgoViz Hub",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sgkandale.github.io/favicon.ico"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sgkandale.github.io/probabilistic_flajolet_martin.html"
  }
}</script></head>
<body>
<div class="container">
<h1>üî¨ Flajolet-Martin Algorithm</h1>
<div class="intro">
<p><strong>Flajolet-Martin (1985)</strong> was the groundbreaking algorithm that started the field of probabilistic cardinality estimation. It introduced the brilliant insight that the position of the first '1' bit in random hash values can estimate the number of distinct elements in a stream!</p>
</div>
<div class="algorithm-history">
<div class="history-card flajolet">
<h3>üî¥ Flajolet-Martin (1985)</h3>
<p><strong>Innovation:</strong> First probabilistic cardinality estimator</p>
<p><strong>Method:</strong> Track max position of first '1' bit</p>
<p><strong>Space:</strong> O(log log n) bits</p>
<p><strong>Accuracy:</strong> High variance, needs averaging</p>
</div>
<div class="history-card loglog">
<h3>üü° LogLog (2003)</h3>
<p><strong>Improvement:</strong> Use leading zeros instead</p>
<p><strong>Method:</strong> Multiple buckets + averaging</p>
<p><strong>Space:</strong> Better constants</p>
<p><strong>Accuracy:</strong> Reduced variance (~20% error)</p>
</div>
<div class="history-card hyperloglog">
<h3>üü¢ HyperLogLog (2007)</h3>
<p><strong>Perfection:</strong> Harmonic mean</p>
<p><strong>Method:</strong> Advanced bias correction</p>
<p><strong>Space:</strong> Optimal constants</p>
<p><strong>Accuracy:</strong> ~2% error (industry standard)</p>
</div>
</div>
<div class="controls">
<button class="btn success" onclick="addElement()">‚ûï Add Element</button>
<button class="btn" onclick="addRandomElement()">üé≤ Add Random</button>
<button class="btn danger" onclick="reset()">üîÑ Reset</button>
<button class="btn" onclick="showEvolution()">üìà Algorithm Evolution</button>
</div>
<div class="dataset-examples">
<button class="dataset-btn" onclick="loadDataset(['apple', 'banana', 'cherry', 'date', 'elderberry'])">üçé Fruits</button>
<button class="dataset-btn" onclick="loadDataset(['user123', 'user456', 'user789', 'user101', 'user202'])">üë• Users</button>
<button class="dataset-btn" onclick="loadDataset(['tcp:80', 'udp:53', 'tcp:443', 'tcp:22'])">üåê Network Ports</button>
<button class="dataset-btn" onclick="generateLargeDataset()">üìà Large Dataset (500 items)</button>
</div>
<div class="max-tracker">
<h3>üéØ Maximum First-1 Position Found</h3>
<div class="max-value" id="maxPosition">0</div>
<p>The key value Flajolet-Martin uses for estimation!</p>
</div>
<div class="main-content">
<div class="input-section">
<h3>üî§ Add New Element</h3>
<input id="elementInput" onkeypress="handleKeyPress(event)" placeholder="Enter any string (e.g., user123, apple, 192.168.1.1)" type="text"/>
<div id="currentElement" style="display: none;">
<h4>Current Element Processing:</h4>
<div class="hash-display" id="elementHash"></div>
<div class="binary-display" id="binaryHash"></div>
</div>
<div class="elements-list">
<h4>Elements Processed:</h4>
<div id="elementsList"></div>
</div>
</div>
<div class="bitmap-section">
<h3>üìä Flajolet-Martin Bitmap</h3>
<p style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 15px;">
                    Each bit represents if we've seen a first-1 at that position
                </p>
<div class="bitmap-display" id="bitmapDisplay"></div>
<div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 5px; margin-top: 5px;">
<div class="bit-label">0</div><div class="bit-label">1</div><div class="bit-label">2</div><div class="bit-label">3</div>
<div class="bit-label">4</div><div class="bit-label">5</div><div class="bit-label">6</div><div class="bit-label">7</div>
<div class="bit-label">8</div><div class="bit-label">9</div><div class="bit-label">10</div><div class="bit-label">11</div>
<div class="bit-label">12</div><div class="bit-label">13</div><div class="bit-label">14</div><div class="bit-label">15</div>
</div>
</div>
</div>
<div class="processing-section">
<h3>üîç Step-by-Step Flajolet-Martin Process</h3>
<div id="steps">
<div class="explanation">
<h4>How Flajolet-Martin Works:</h4>
<p><strong>1. Hash:</strong> Convert each element to a binary hash</p>
<p><strong>2. Find First-1:</strong> Find position of first '1' bit (rightmost)</p>
<p><strong>3. Set Bitmap:</strong> Set bit at that position in our bitmap</p>
<p><strong>4. Track Maximum:</strong> Keep track of highest position seen</p>
<p><strong>5. Estimate:</strong> Cardinality ‚âà 2^(R) where R is rightmost 0 in bitmap</p>
<br/>
<p><em>Key insight: If we see first-1 at position k, we likely processed ~2^k unique elements!</em></p>
</div>
</div>
</div>
<div class="stats">
<div class="stat-card">
<div class="stat-value" id="actualCount">0</div>
<div class="stat-label">Actual Unique Count</div>
</div>
<div class="stat-card">
<div class="stat-value" id="estimatedCount">0</div>
<div class="stat-label">FM Estimated Count</div>
</div>
<div class="stat-card">
<div class="stat-value" id="errorRate">0%</div>
<div class="stat-label">Error Rate</div>
</div>
<div class="stat-card">
<div class="stat-value" id="bitsUsed">16</div>
<div class="stat-label">Bits Used (Demo)</div>
</div>
</div>
<div class="variance-warning">
            ‚ö†Ô∏è <strong>High Variance Issue:</strong> Flajolet-Martin has high variance! In practice, you'd use multiple independent hash functions and take the median of estimates to improve accuracy.
        </div>
<div class="improvement-note">
            ‚úÖ <strong>Historical Impact:</strong> This algorithm revolutionized big data processing by showing that approximate counting with probabilistic methods could use logarithmic space instead of linear space!
        </div>
<div class="explanation">
<h4>üßÆ Flajolet-Martin Estimation:</h4>
<div class="formula">
                Let R = position of rightmost 0 bit in bitmap
                <br/>Cardinality ‚âà 2^R / œÜ
                <br/><small>where œÜ ‚âà 0.77351 (bias correction factor)</small>
</div>
</div>
<div class="explanation">
<h4>üéØ Why This Works (Probabilistic Magic!):</h4>
<p><strong>Intuition:</strong> If you flip a fair coin and get heads k times before the first tails, you probably flipped about 2^k times total.</p>
<p><strong>Hash Analogy:</strong> Hash values are like coin flips. If the rightmost '1' bit is at position k, you likely hashed about 2^k distinct elements.</p>
<p><strong>Bitmap Role:</strong> Tracks all positions we've seen, giving us the "profile" of our distinct elements.</p>
</div>
</div>
<script></script></body></html>