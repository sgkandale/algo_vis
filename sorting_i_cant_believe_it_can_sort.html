<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>I Can't Believe It Can Sort | AlgoViz Hub</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #0f172a;
        --secondary: #1e293b;
        --accent: #6366f1;
        --accent-light: #818cf8;
        --accent-glow: rgba(99, 102, 241, 0.2);
        --text: #e2e8f0;
        --text-secondary: #94a3b8;
        --card-bg: rgba(30, 41, 59, 0.7);
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --transition: all 0.3s ease;
        --radius: 12px;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        --glow: 0 0 15px var(--accent-glow);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: var(--text);
        font-family: "Roboto", sans-serif;
        line-height: 1.6;
        min-height: 100vh;
        padding: 0;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 10% 20%,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 20%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(129, 140, 248, 0.1) 0%,
            transparent 20%
          );
        z-index: -1;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        position: relative;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: var(--accent);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--glow);
      }

      .logo-icon i {
        font-size: 24px;
        color: white;
      }

      .logo-text h1 {
        font-family: "Roboto Mono", monospace;
        font-weight: 700;
        font-size: 28px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .logo-text p {
        font-size: 14px;
        color: var(--text-secondary);
        letter-spacing: 1.5px;
      }

      .breadcrumb {
        font-size: 14px;
        color: var(--text-secondary);
        margin-top: 10px;
      }

      .breadcrumb a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        text-decoration: underline;
      }

      /* Algorithm Header */
      .algorithm-header {
        margin: 40px 0;
        text-align: center;
        padding: 20px;
        background: var(--card-bg);
        border-radius: var(--radius);
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .algorithm-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .algorithm-header h1 {
        font-size: 42px;
        margin-bottom: 15px;
        background: linear-gradient(
          to right,
          var(--accent-light),
          var(--accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 800;
      }

      .algorithm-header .category {
        font-size: 18px;
        color: var(--accent-light);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .complexity-badge {
        display: inline-block;
        background: rgba(129, 140, 248, 0.2);
        color: var(--accent-light);
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: 600;
        font-family: "Roboto Mono", monospace;
        margin-top: 15px;
      }

      /* Main Content Layout */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 30px;
        margin-bottom: 40px;
      }

      @media (max-width: 900px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      /* Algorithm Detail Sections */
      .section {
        background: var(--card-bg);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-light)
        );
      }

      .section h2 {
        font-size: 26px;
        margin-bottom: 20px;
        color: var(--accent-light);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .section h2 i {
        color: var(--accent);
        width: 36px;
        height: 36px;
        background: rgba(99, 102, 241, 0.2);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .section p {
        color: var(--text-secondary);
        font-size: 17px;
        line-height: 1.8;
        margin-bottom: 20px;
      }

      .key-points {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }

      .point-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
      }

      .point-card h3 {
        color: var(--accent-light);
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .point-card h3 i {
        color: var(--accent);
      }

      .point-card p {
        margin-bottom: 0;
        font-size: 15px;
      }

      /* Visualization Console */
      .visualization-console {
        background: rgba(15, 23, 42, 0.8);
        border-radius: var(--radius);
        padding: 25px;
        margin: 30px 0;
        border: 1px solid rgba(99, 102, 241, 0.3);
        box-shadow: var(--glow);
      }

      .console-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .console-header h3 {
        color: var(--accent-light);
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .console-controls {
        display: flex;
        gap: 10px;
      }

      .console-btn {
        background: var(--accent);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Roboto Mono", monospace;
        transition: var(--transition);
      }

      .console-btn:hover {
        background: var(--accent-light);
      }

      .console-btn.secondary {
        background: rgba(148, 163, 184, 0.2);
      }

      .visualization-area {
        height: 300px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .visualization-area::before {
        content: "Algorithm Visualization";
        position: absolute;
        color: rgba(148, 163, 184, 0.5);
        font-size: 20px;
      }

      .console-input {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .console-input input {
        flex: 1;
        padding: 12px 15px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 5px;
        color: var(--text);
        font-family: "Roboto Mono", monospace;
      }

      .console-input input:focus {
        outline: none;
        border-color: var(--accent);
      }

      /* Algorithm Properties */
      .properties-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .property-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: var(--radius);
        padding: 20px;
        border: 1px solid rgba(148, 163, 184, 0.1);
        text-align: center;
      }

      .property-card h4 {
        color: var(--text-secondary);
        font-size: 14px;
        margin-bottom: 8px;
        font-weight: 400;
      }

      .property-card .value {
        font-size: 20px;
        font-weight: 700;
        color: var(--accent-light);
        font-family: "Roboto Mono", monospace;
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 40px 0 30px;
        color: var(--text-secondary);
        font-size: 14px;
        border-top: 1px solid rgba(148, 163, 184, 0.1);
        margin-top: 40px;
      }

      footer p {
        margin: 10px 0;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-top: 15px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .footer-links a {
        color: var(--accent-light);
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        color: var(--accent);
      }

      /* Animations */
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      .floating {
        animation: float 6s ease-in-out infinite;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          gap: 25px;
          text-align: center;
        }

        .algorithm-header h1 {
          font-size: 32px;
        }

        .key-points {
          grid-template-columns: 1fr;
        }
      }

      /* Code Block Styling */
      .code-block {
        background: #0d1117;
        border-radius: 8px;
        padding: 20px;
        margin: 25px 0;
        overflow-x: auto;
        font-family: "Roboto Mono", monospace;
        font-size: 15px;
        border: 1px solid rgba(99, 102, 241, 0.3);
      }

      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        color: var(--text-secondary);
      }

      .copy-btn {
        background: rgba(99, 102, 241, 0.2);
        color: var(--accent-light);
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Roboto Mono", monospace;
        transition: var(--transition);
      }

      .copy-btn:hover {
        background: rgba(99, 102, 241, 0.3);
      }

      .code-block pre {
        margin: 0;
      }

      .code-block code {
        color: #c9d1d9;
        line-height: 1.5;
      }

      .keyword {
        color: #ff7b72;
      }
      .function {
        color: #d2a8ff;
      }
      .comment {
        color: #8b949e;
      }
      .string {
        color: #a5d6ff;
      }
      .number {
        color: #79c0ff;
      }

      /* Visualization Styles */
      .array-container {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        height: 100%;
        gap: 15px;
        padding: 20px;
      }

      .element {
        width: 60px;
        background: var(--accent);
        border-radius: 8px 8px 0 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all 0.5s ease;
        position: relative;
      }

      .element-value {
        font-size: 24px;
        font-weight: bold;
        padding: 10px 0;
        font-family: "Roboto Mono", monospace;
      }

      .element-index {
        position: absolute;
        bottom: -25px;
        color: var(--text-secondary);
        font-family: "Roboto Mono", monospace;
      }

      .active {
        box-shadow: 0 0 15px var(--success);
        transform: scale(1.05);
        z-index: 2;
      }

      .comparing {
        box-shadow: 0 0 15px var(--warning);
      }

      .swapping {
        box-shadow: 0 0 15px var(--danger);
      }

      .sorted {
        background: var(--success);
      }

      .algorithm-explanation {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(15, 23, 42, 0.8);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid var(--accent);
        max-width: 300px;
        font-size: 14px;
      }

      .stats {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 15px;
        font-family: "Roboto Mono", monospace;
        font-size: 14px;
      }

      .stat {
        background: rgba(99, 102, 241, 0.2);
        padding: 8px 15px;
        border-radius: 20px;
      }

      @keyframes swapAnimation {
        0% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-30px);
        }
        100% {
          transform: translateY(0);
        }
      }

      .swap {
        animation: swapAnimation 0.8s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header>
        <div class="logo">
          <div class="logo-icon floating">
            <i class="fas fa-project-diagram"></i>
          </div>
          <div class="logo-text">
            <h1>AlgoViz Hub</h1>
            <p>ALGORITHM VISUALIZATION REPOSITORY</p>
            <div class="breadcrumb">
              <a href="#"><i class="fas fa-home"></i> Home</a> >
              <a href="#">Sorting Algorithms</a> >
              <span>I Can't Believe It Can Sort</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Algorithm Header -->
      <div class="algorithm-header">
        <h1>I Can't Believe It Can Sort</h1>
        <div class="category">
          <i class="fas fa-face-surprise"></i> Unintuitive Sorting Algorithm
        </div>
        <div class="complexity-badge">Time Complexity: O(n²)</div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Left Column: Algorithm Details -->
        <div class="left-column">
          <!-- Description Section -->
          <div class="section">
            <h2><i class="fas fa-file-alt"></i> Algorithm Overview</h2>
            <p>
              "I Can't Believe It Can Sort" is a surprisingly effective sorting
              algorithm that appears too simple to work. It repeatedly scans
              through the array, swapping adjacent elements if they are in the
              wrong order, but restarts the scan from the beginning after each
              swap.
            </p>
            <p>
              Despite its inefficiency, this algorithm actually sorts the array
              correctly. The name comes from the creator's disbelief that such a
              simple approach could work. It's an interesting demonstration of
              how sometimes the most straightforward solutions can be effective,
              even if not optimal.
            </p>

            <div class="key-points">
              <div class="point-card">
                <h3><i class="fas fa-lightbulb"></i> Key Insight</h3>
                <p>
                  Repeated adjacent comparisons with restarts after each swap
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-bolt"></i> Performance</h3>
                <p>O(n²) time complexity - inefficient but functional</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-history"></i> Behavior</h3>
                <p>Restarts scanning from beginning after every swap</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-project-diagram"></i> Use Case</h3>
                <p>Educational demonstration of sorting fundamentals</p>
              </div>
            </div>
          </div>

          <!-- Visualization Console -->
          <div class="section">
            <h2>
              <i class="fas fa-laptop-code"></i> Interactive Visualization
            </h2>
            <p>
              Enter numbers to sort and watch the "I Can't Believe It Can Sort"
              algorithm in action. The visualization shows each comparison,
              swap, and restart as the algorithm works its way through the
              array.
            </p>

            <div class="visualization-console">
              <div class="console-header">
                <h3>
                  <i class="fas fa-play-circle"></i> Algorithm Visualization
                </h3>
                <div class="console-controls">
                  <button class="console-btn secondary" id="settingsBtn">
                    <i class="fas fa-cog"></i> Settings
                  </button>
                  <button class="console-btn" id="runBtn">
                    <i class="fas fa-play"></i> Run
                  </button>
                  <button class="console-btn secondary" id="stepBtn">
                    <i class="fas fa-step-forward"></i> Step
                  </button>
                  <button class="console-btn secondary" id="resetBtn">
                    <i class="fas fa-redo"></i> Reset
                  </button>
                </div>
              </div>

              <div class="visualization-area">
                <div class="algorithm-explanation" id="explanation">
                  <strong>Current Operation:</strong> Initializing algorithm
                </div>
                <div class="array-container" id="arrayContainer"></div>
              </div>

              <div class="console-input">
                <input
                  type="text"
                  id="inputArray"
                  placeholder="Enter numbers (e.g., 5, 3, 8, 1, 2)"
                  value="5, 3, 8, 1, 2"
                />
                <button class="console-btn" id="randomBtn">
                  <i class="fas fa-random"></i> Random
                </button>
              </div>
              <div class="stats">
                <div class="stat">
                  Comparisons: <span id="comparisons">0</span>
                </div>
                <div class="stat">Swaps: <span id="swaps">0</span></div>
                <div class="stat">Passes: <span id="passes">0</span></div>
              </div>
            </div>
          </div>

          <!-- Algorithm Steps -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Algorithm Steps</h2>
            <p>The algorithm works through these simple steps:</p>

            <div class="key-points">
              <div class="point-card">
                <h3>
                  <i class="fas fa-arrow-right"></i> 1. Start at Beginning
                </h3>
                <p>Begin scanning the array from the first element</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-exchange-alt"></i> 2. Compare Adjacent</h3>
                <p>Compare each element with the next one in the array</p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-sync-alt"></i> 3. Swap & Restart</h3>
                <p>
                  If elements are out of order, swap them and restart scanning
                  from the beginning
                </p>
              </div>
              <div class="point-card">
                <h3><i class="fas fa-flag-checkered"></i> 4. Complete Scan</h3>
                <p>
                  If a complete scan is made without any swaps, the array is
                  sorted
                </p>
              </div>
            </div>
          </div>

          <!-- Pseudocode Section -->
          <div class="section">
            <h2><i class="fas fa-list-ol"></i> Pseudocode</h2>
            <div class="code-block">
              <pre><code>procedure unbelievableSort(arr):
    n = length(arr)
    i = 0
    sorted = false
    
    while not sorted:
        if i < n-1:
            if arr[i] > arr[i+1]:
                swap arr[i] and arr[i+1]
                i = 0  // Restart from beginning
            else:
                i = i + 1
        else:
            sorted = true  // Array is sorted</code></pre>
            </div>
          </div>

          <!-- Implementation Section -->
          <div class="section">
            <h2><i class="fas fa-code"></i> Implementation</h2>
            <p>
              Below is a JavaScript implementation of the "I Can't Believe It
              Can Sort" algorithm. The algorithm repeatedly scans the array,
              restarting from the beginning whenever a swap is made.
            </p>

            <div class="code-block">
              <div class="code-header">
                <span>JavaScript Implementation</span>
                <button class="copy-btn">
                  <i class="fas fa-copy"></i> Copy Code
                </button>
              </div>
              <pre><code>function unbelievableSort(arr) {
    let n = arr.length;
    let i = 0;
    let sorted = false;
    let comparisons = 0;
    let swaps = 0;
    
    while (!sorted) {
        // Check if we've reached the end of the array
        if (i >= n - 1) {
            sorted = true;
            continue;
        }
        
        comparisons++;
        
        // Compare adjacent elements
        if (arr[i] > arr[i + 1]) {
            // Swap elements if they're in the wrong order
            [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]];
            swaps++;
            
            // Restart from the beginning
            i = 0;
        } else {
            // Move to next element
            i++;
        }
    }
    
    console.log(`Sorted array: ${arr}`);
    console.log(`Comparisons: ${comparisons}, Swaps: ${swaps}`);
    return arr;
}

// Example usage
const arr = [5, 3, 8, 1, 2];
unbelievableSort(arr);</code></pre>
            </div>
          </div>
        </div>

        <!-- Right Column: Additional Info -->
        <div class="right-column">
          <!-- Properties Section -->
          <div class="section">
            <h2><i class="fas fa-info-circle"></i> Algorithm Properties</h2>
            <div class="properties-grid">
              <div class="property-card">
                <h4>Category</h4>
                <div class="value">Comparison</div>
              </div>
              <div class="property-card">
                <h4>Type</h4>
                <div class="value">Exchange</div>
              </div>
              <div class="property-card">
                <h4>Stable</h4>
                <div class="value">Yes</div>
              </div>
              <div class="property-card">
                <h4>In-place</h4>
                <div class="value">Yes</div>
              </div>
              <div class="property-card">
                <h4>Best Case</h4>
                <div class="value">O(n)</div>
              </div>
              <div class="property-card">
                <h4>Worst Case</h4>
                <div class="value">O(n²)</div>
              </div>
              <div class="property-card">
                <h4>Average Case</h4>
                <div class="value">O(n²)</div>
              </div>
              <div class="property-card">
                <h4>Space</h4>
                <div class="value">O(1)</div>
              </div>
            </div>
          </div>

          <!-- Applications Section -->
          <div class="section">
            <h2><i class="fas fa-lightbulb"></i> Why It's Interesting</h2>
            <p>This algorithm is fascinating for several reasons:</p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                It appears too simple to work at first glance
              </li>
              <li style="margin-bottom: 10px">
                Demonstrates that sorting can be achieved through repeated
                adjacent comparisons
              </li>
              <li style="margin-bottom: 10px">
                Shows how restarting after each swap eventually leads to a
                sorted array
              </li>
              <li style="margin-bottom: 10px">
                Excellent educational tool for understanding sorting
                fundamentals
              </li>
              <li>Historical curiosity in algorithm development</li>
            </ul>
          </div>

          <!-- Complexity Section -->
          <div class="section">
            <h2><i class="fas fa-chart-line"></i> Complexity Analysis</h2>
            <p>
              The "I Can't Believe It Can Sort" algorithm has a worst-case time
              complexity of O(n²), making it inefficient for large datasets.
              However, it has some interesting characteristics:
            </p>
            <ul
              style="
                padding-left: 20px;
                margin: 15px 0;
                color: var(--text-secondary);
              "
            >
              <li style="margin-bottom: 10px">
                <strong>Best Case:</strong> O(n) for already sorted arrays
              </li>
              <li style="margin-bottom: 10px">
                <strong>Worst Case:</strong> O(n²) for reverse-sorted arrays
              </li>
              <li style="margin-bottom: 10px">
                <strong>Space Complexity:</strong> O(1) as it sorts in-place
              </li>
              <li style="margin-bottom: 10px">
                The restart-after-swap approach leads to many repeated
                comparisons
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/sgkandale/" target="_blank"
            ><i class="fa-brands fa-linkedin"></i> LinkedIN</a
          >
          <a href="mailto:me@sgkandale.com"
            ><i class="fa-solid fa-at"></i> E-Mail</a
          >
          <a href="https://buymeacoffee.com/sgkandale" target="_blank"
            ><i class="fa-solid fa-mug-hot"></i> Buy Me a Coffee</a
          >
        </div>
        <p>AlgoViz Hub - Interactive Algorithm Visualization Platform</p>
        <p>&copy; 2025 AlgoViz Hub. All rights reserved.</p>
      </footer>
    </div>

    <script>
      // Bead Sort Visualization Logic
      class UnbelievableSortVisualizer {
        constructor() {
          this.array = [];
          this.i = 0;
          this.sorted = false;
          this.comparisons = 0;
          this.swaps = 0;
          this.passes = 0;
          this.animationSpeed = 1000;
          this.intervalId = null;
          this.isRunning = false;
        }

        initialize(arr) {
          this.array = [...arr];
          this.i = 0;
          this.sorted = false;
          this.comparisons = 0;
          this.swaps = 0;
          this.passes = 0;
          this.render();
          this.updateExplanation("Initialized. Starting sort...");
        }

        step() {
          if (this.sorted) return true;

          if (this.i >= this.array.length - 1) {
            // Reached the end without swaps
            this.sorted = true;
            this.updateExplanation("Array is sorted!");
            return true;
          }

          this.comparisons++;
          document.getElementById("comparisons").textContent = this.comparisons;

          const a = this.array[this.i];
          const b = this.array[this.i + 1];

          if (a > b) {
            // Swap elements
            [this.array[this.i], this.array[this.i + 1]] = [b, a];
            this.swaps++;
            document.getElementById("swaps").textContent = this.swaps;

            this.updateExplanation(
              `Swapped ${a} and ${b}. Restarting from beginning.`
            );
            this.highlightSwap(this.i, this.i + 1);

            // Restart from beginning
            this.i = 0;
            this.passes++;
            document.getElementById("passes").textContent = this.passes;
          } else {
            this.updateExplanation(
              `Compared ${a} and ${b} - in correct order.`
            );
            this.highlightCompare(this.i, this.i + 1);
            this.i++;
          }

          return this.sorted;
        }

        highlightCompare(i, j) {
          const elements = document.querySelectorAll(".element");
          elements.forEach((el) => el.classList.remove("active", "comparing"));

          elements[i].classList.add("comparing");
          elements[j].classList.add("comparing");
        }

        highlightSwap(i, j) {
          const elements = document.querySelectorAll(".element");
          elements.forEach((el) => el.classList.remove("active", "swapping"));

          elements[i].classList.add("swapping");
          elements[j].classList.add("swapping");

          // Add swap animation
          elements[i].classList.add("swap");
          elements[j].classList.add("swap");

          setTimeout(() => {
            elements[i].classList.remove("swap");
            elements[j].classList.remove("swap");
          }, 800);
        }

        updateExplanation(text) {
          document.getElementById(
            "explanation"
          ).innerHTML = `<strong>Current Operation:</strong> ${text}`;
        }

        render() {
          const container = document.getElementById("arrayContainer");
          container.innerHTML = "";

          const maxVal = Math.max(...this.array, 10);
          const containerHeight = 200;

          this.array.forEach((value, index) => {
            const height = (value / maxVal) * 150 + 50;

            const element = document.createElement("div");
            element.className = "element";
            if (this.sorted) element.classList.add("sorted");
            element.style.height = `${height}px`;
            element.innerHTML = `
                        <div class="element-value">${value}</div>
                        <div class="element-index">${index}</div>
                    `;

            container.appendChild(element);
          });
        }
      }

      // DOM Content Loaded
      document.addEventListener("DOMContentLoaded", () => {
        const visualizer = new UnbelievableSortVisualizer();
        const inputArray = document.getElementById("inputArray");
        const runBtn = document.getElementById("runBtn");
        const stepBtn = document.getElementById("stepBtn");
        const resetBtn = document.getElementById("resetBtn");
        const randomBtn = document.getElementById("randomBtn");

        // Set initial array
        const initialArray = inputArray.value.split(",").map(Number);
        visualizer.initialize(initialArray);

        // Run button
        runBtn.addEventListener("click", () => {
          if (runBtn.innerHTML.includes("Run")) {
            runBtn.innerHTML = '<i class="fas fa-stop"></i> Stop';
            runBtn.classList.add("secondary");

            const arr = inputArray.value.split(",").map(Number);
            visualizer.initialize(arr);

            visualizer.intervalId = setInterval(() => {
              const done = visualizer.step();
              visualizer.render();

              if (done) {
                clearInterval(visualizer.intervalId);
                runBtn.innerHTML = '<i class="fas fa-play"></i> Run';
                runBtn.classList.remove("secondary");
              }
            }, visualizer.animationSpeed);
          } else {
            clearInterval(visualizer.intervalId);
            runBtn.innerHTML = '<i class="fas fa-play"></i> Run';
            runBtn.classList.remove("secondary");
          }
        });

        // Step button
        stepBtn.addEventListener("click", () => {
          const arr = inputArray.value.split(",").map(Number);
          if (visualizer.array.length === 0) {
            visualizer.initialize(arr);
          }
          visualizer.step();
          visualizer.render();
        });

        // Reset button
        resetBtn.addEventListener("click", () => {
          const arr = inputArray.value.split(",").map(Number);
          visualizer.initialize(arr);
        });

        // Random button
        randomBtn.addEventListener("click", () => {
          const randomArray = Array.from(
            { length: 5 },
            () => Math.floor(Math.random() * 10) + 1
          );
          inputArray.value = randomArray.join(", ");
          visualizer.initialize(randomArray);
        });

        // Input change
        inputArray.addEventListener("change", () => {
          const arr = inputArray.value.split(",").map(Number);
          visualizer.initialize(arr);
        });

        // Copy button functionality
        document
          .querySelector(".copy-btn")
          .addEventListener("click", function () {
            const code = document.querySelector(".code-block code").innerText;
            navigator.clipboard.writeText(code);

            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-check"></i> Copied!';

            setTimeout(() => {
              this.innerHTML = originalText;
            }, 2000);
          });
      });
    </script>
  </body>
</html>
